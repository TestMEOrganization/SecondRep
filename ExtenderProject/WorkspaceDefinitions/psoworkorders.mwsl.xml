<?xml version="1.0" encoding="UTF-8"?>
<!-- KRN, 14/07/11: First draft of PSO Work Orders (39931).-->
<!-- JSV, 04/10/11: Purchase related table for budgets (39931).-->
<!-- KRN, 18/11/11: Show table depending on job InvoiceAllocation setup (40007).-->
<MWSL xmlns="http://www.deltek.com/ns/mwsl" version="0.23">
  <Workspace name="PSOWorkOrders" title="Work Orders">
    <Filter name="WorkOrders_Filter" source="Jobs" title="Work Order List" layout="PSOJobs" view="WorkOrderHome">
      <Bind foreignKey="primary">
        <Card name="JobOverview_Card" source="JobOverview" layout="PSOJobOverview" view="WorkOrderOverview" title="Overview">
          <Bind foreignKey="primary">
            <Hidden source="JobDescriptions">
              <Bind foreignKey="DocumentArchiveNumber_DocumentArchiveHeader">
                <Table source="DocumentArchives" view="AttachDocument_From_Parent" title="Documents">
                  <Expansions minimized="true">
                    <Bind foreignKey="primary">
                      <Table source="DocumentRevisions" view="Full" />
                    </Bind>
                  </Expansions>
                </Table>
              </Bind>
            </Hidden>
          </Bind>
        </Card>
        <Card source="JobBudgets" layout="PSOJobBudgets" view="WorkOrder" title="Budget">
          <With>
            <Table title="Budget Lines" view="WorkOrder" />
            <Table title="Budget Lines, Purchase" view="WorkOrder_Purchase" />
          </With>
        </Card>
        <Card source="EmployeeControl" layout="PSOEmployeeControl" view="WorkOrder" title="Employee Control">
          <With>
            <Table />
          </With>
          <Bind foreignKey="primary">
            <Hidden source="EmployeeControl" />
            <!-- For standard layout files wizard definition -->
          </Bind>
        </Card>
        <Card source="JobOverview" layout="PSOJobOverview" view="WorkOrderRegistrationsOverview" title="Registrations">
          <Bind foreignKey="primary">
            <Hidden source="InvoiceSelection">
              <With>
                <Table layout="PSOInvoiceSelection" view="WorkOrderRegistrations" title="Details" hidden="Parent.InvoiceAllocation" />
              </With>
            </Hidden>
            <Hidden source="JobInvoiceAllocation">
              <With>
                <Table layout="PSOJobInvoiceAllocation" view="WorkOrderRegistrations" title="Details" hidden="not Parent.InvoiceAllocation" />
              </With>
            </Hidden>
          </Bind>
        </Card>
        <Card source="InvoicePreparation" view="Full" title="Invoice">
          <With>
            <Table />
          </With>
        </Card>
        <Card source="PendingJobActions" layout="PSOPendingJobActions" view="WorkOrder" title="Close">
          <With>
            <Table />
          </With>
        </Card>
      </Bind>
      <With>
        <Hidden />
        <!-- Source="Jobs" layout="PSOJobs" - layout for Create wizard -->
      </With>
    </Filter>
  </Workspace>
</MWSL>

