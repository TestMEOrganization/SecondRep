<?xml version="1.0" encoding="UTF-8"?>
<!-- RMA, 06/04/09: Create empty forms for every dialog (37642).-->
<!-- JSV, 02/07/09: Insert Original layout converted from mdl and filter layout (37802).-->
<!-- MJA, 27/10/09: Update Original layout and remove Empty layout (37802).-->
<!-- JSV, 02/06/10: Rename CompanyName1Var to EmployeeCompanyNameVar (38482).-->
<!-- KUN, 07/07/10: Added group and columns for user update information (38625).-->
<!-- BPE, 08/09/10: Changed layout to use global definition dimensions (38806). -->
<!-- MJA, 14/09/10: Implement conditional layout (38461).-->
<!-- JSV, 25/11/10: Compact block for Original filter (39106).-->
<!-- JSV, 09/12/10: Show field TransferToPeoplePlanner (38640).-->
<!-- JSV, 17/12/10: Only show TransferToPeoplePlanner if has addon 128 (38640).-->
<!-- PSZ, 04/03/11: New workspace for user management (39462).-->
<!-- PSZ, 20/06/11: Original layout should be placed as the first layout (39299).-->
<!-- PSZ, 13/09/11: New CreateTemplateUserWizard wizard (39473).-->
<!-- PSZ, 15/09/11: Add link to Employees workspace (39939).-->
<!-- CSK, 19/10/11: New removed from creation wizard title (40064).-->
<MDML xmlns="http://www.deltek.com/ns/mdml" version="0.59">
  <Layout source="Users">
    <FilterPane>
      <Filter name="Standard">
        <Compact>
          <Description template="^1, Employee No. '^2'" arguments="NameOfUser;EmployeeNumber" />
        </Compact>
        <Columns>
          <Field source="NameOfUser" />
          <Field source="UserType" />
          <Field source="EmployeeNumber" />
          <Field source="EmployeeCompanyNumber" />
          <Field source="FromValidUser" />
          <Field source="ToValidUser" />
          <Field source="AccessCodeExpiryDate" />
          <Field source="BlockedAccessCode" />
          <Field source="CanChangePrices" />
          <Field source="CanApproveOrders" />
        </Columns>
      </Filter>
      <Filter name="Custom">
        <Actions>
          <Action source="with.Create" wizard="CreateUserWizard" />
        </Actions>
        <ControlBar>
          <Selection default="ActiveUsers">
            <Option title="Active Users" name="ActiveUsers" restriction="Template = false and BlockedAccessCode = false" />
            <Option title="Template Users" name="TemplateUsers" restriction="Template = true" />
            <Option title="Blocked Users" name="BlockedUsers" restriction="Template = false and BlockedAccessCode = true" />
            <Option title="All Users" name="AllUsers" />
          </Selection>
        </ControlBar>
        <Compact>
          <Description template="^1, Employee No. '^2'" arguments="NameOfUser;EmployeeNumber" />
        </Compact>
        <Columns>
          <Field source="NameOfUser" />
          <Field source="UserType" />
          <Field source="EmployeeNumber" />
          <Field source="EmployeeCompanyNumber" />
          <Field source="FromValidUser" />
          <Field source="ToValidUser" />
          <Field source="AccessCodeExpiryDate" />
          <Field source="BlockedAccessCode" />
          <Field source="CanChangePrices" />
          <Field source="CanApproveOrders" />
        </Columns>
      </Filter>
      <Filter name="UserManagement">
        <Actions>
          <Action source="with.Create" wizard="CreateUserWizard" />
        </Actions>
        <ControlBar>
          <Selection default="ActiveUsers">
            <Option title="Active Users" name="ActiveUsers" restriction="Template = false and BlockedAccessCode = false" />
            <Option title="Template Users" name="TemplateUsers" restriction="Template = true" />
            <Option title="Blocked Users" name="BlockedUsers" restriction="Template = false and BlockedAccessCode = true" />
            <Option title="All Users" name="AllUsers" />
          </Selection>
        </ControlBar>
        <Compact>
          <Description template="^1, Employee No. '^2'" arguments="NameOfUser;EmployeeNumber" />
        </Compact>
        <Columns>
          <Field source="NameOfUser" />
          <Field source="UserType" />
          <Field source="EmployeeNumber" />
          <Field source="EmployeeCompanyNumber" />
          <Field source="FromValidUser" />
          <Field source="ToValidUser" />
          <Field source="AccessCodeExpiryDate" />
          <Field source="BlockedAccessCode" />
          <Field source="CanChangePrices" />
          <Field source="CanApproveOrders" />
        </Columns>
      </Filter>
    </FilterPane>
    <UpperPane>
      <Define>
        <Include fragment="GD_Dimensions" />
        <Trigger name="CreateTemplateUserTrigger">
          <Assign source="UserType" value="parent.with.UserType" />
          <Assign source="Template" value="true" />
        </Trigger>
      </Define>
      <Wizard name="CreateUserWizard" title="Create User">
        <Page form="CreateUserWizardPage" title="User Information" />
      </Wizard>
      <Wizard name="CreateTemplateUserWizard" title="Create Template User">
        <Page form="CreateTemplateUserWizardPage" title="User Information" preTrigger="CreateTemplateUserTrigger" />
      </Wizard>
      <Form name="Full">
        <Actions all="true">
          <Create wizard="CreateUserWizard" />
        </Actions>
        <Row>
          <Column>
            <Group title="User">
              <Field source="NameOfUser" title="Name" />
              <Field source="EmployeeNumber" />
              <Reference foreignKey="EmployeeCompanyNumber_CompanyInformation" />
              <If condition="hasAddOn(128)">
                <Boolean source="TransferToPeoplePlanner" />
              </If>
            </Group>
            <Group title="User Type">
              <Field source="UserType" title="Type" />
              <Boolean source="IsAdministrator" />
              <Boolean source="Template" />
            </Group>
            <Group title="Validity">
              <Range firstSource="FromValidUser" lastSource="ToValidUser" title="Period" />
              <Field source="AccessCodeExpiryDate" />
              <Boolean source="BlockedAccessCode" />
            </Group>
            <If condition="hasAddOn(118)">
              <Group title="Portal">
                <Field source="StandardComponent" />
                <Field source="ClientType" />
              </Group>
            </If>
            <Group title="Database User Name">
              <Field source="DatabaseNameOfUser" title="Name" />
              <Field source="DatabasePassword" title="Password" />
            </Group>
            <Group title="Network Username">
              <Field source="NetworkUserName" title="Name" />
              <Field source="NetworkDomainName" title="Domain Name" />
            </Group>
            <Group ref="UserUpdateGroup" />
          </Column>
          <Column>
            <Group title="Dimension Combination">
              <Field source="DimensionCombNumber" title="Dim. Comb. No." />
            </Group>
            <Group title="Derived Company">
              <Grid>
                <Header cells="|Value|;|Overwrite|" title="" />
                <Row cells="CompanyNumber;OverwriteCompany#" title="Company No." />
              </Grid>
            </Group>
            <Group title="Derived Account">
              <Grid>
                <Header cells="|Value|;|Overwrite|" title="" />
                <Row cells="AccountNumber;OverwriteAccount#" title="Account No." />
              </Grid>
            </Group>
            <Group ref="DerivedDimensionGroup" />
            <Group title="Object Reference">
              <Field source="InternalRelationName" />
              <Field source="RelationNameVar" title="Relation Name" />
              <Field source="Key1Var" titleValue="KeyField1Var" />
              <Field source="Key2Var" titleValue="KeyField2Var" />
              <Field source="Key3Var" titleValue="KeyField3Var" />
              <Field source="Key4Var" titleValue="KeyField4Var" />
            </Group>
          </Column>
        </Row>
      </Form>
      <Form name="CreateUserWizardPage">
        <Actions>
          <Create />
        </Actions>
        <Group>
          <Field source="NameOfUser" title="Name" mandatory="true" />
          <Field source="EmployeeNumber" />
          <Reference foreignKey="EmployeeCompanyNumber_CompanyInformation" />
        </Group>
        <Group title="User Type">
          <Field source="UserType" title="Type" />
        </Group>
        <Group title="Validity">
          <Range firstSource="FromValidUser" lastSource="ToValidUser" title="Period" />
        </Group>
        <Group title="Create User Template">
          <Boolean source="Template" />
        </Group>
      </Form>
      <Form name="CreateTemplateUserWizardPage">
        <Actions>
          <Create />
        </Actions>
        <Group>
          <Field source="NameOfUser" title="Name" mandatory="true" />
          <Reference foreignKey="EmployeeCompanyNumber_CompanyInformation" />
        </Group>
        <Group title="User Type">
          <Field source="UserType" title="Type" />
        </Group>
        <Group title="Validity">
          <Range firstSource="FromValidUser" lastSource="ToValidUser" title="Period" />
        </Group>
      </Form>
      <Form name="Custom">
        <Actions all="true">
          <Exclude>
            <Create />
            <Delete />
          </Exclude>
          <Action source="primary-&gt;ResetPassword.Reset" title="Reset Password" disabled="false" />
        </Actions>
        <Row>
          <Column>
            <Group title="User">
              <Field source="NameOfUser" title="Name" />
              <Field source="EmployeeNumber" />
              <If condition="EmployeeNumber != ''">
                <Link workspace="Employees" template="Employee details..." title="" icon="WorkspaceLink">
                  <Style anchor="both" />
                  <Target pane="EmployeeFilter">
                    <Restriction template="Selected Employee" expression="EmployeeNumber=target.EmployeeNumber" />
                    <Focus>
                      <Match value="EmployeeNumber" field="EmployeeNumber" />
                    </Focus>
                  </Target>
                </Link>
              </If>
              <Reference foreignKey="EmployeeCompanyNumber_CompanyInformation" />
              <If condition="hasAddOn(128)">
                <Boolean source="TransferToPeoplePlanner" />
              </If>
            </Group>
            <Group title="User Type">
              <Field source="UserType" title="Type" />
              <Field source="Template" />
              <Boolean source="IsAdministrator" />
            </Group>
            <Group title="Validity">
              <Range firstSource="FromValidUser" lastSource="ToValidUser" title="Period" />
              <Field source="AccessCodeExpiryDate" />
              <Boolean source="BlockedAccessCode" />
            </Group>
            <If condition="hasAddOn(118)">
              <Group title="Portal">
                <Field source="StandardComponent" />
                <Field source="ClientType" />
              </Group>
            </If>
            <Group title="Database User Name">
              <Field source="DatabaseNameOfUser" title="Name" />
              <Field source="DatabasePassword" title="Password" />
            </Group>
            <Group title="Network Username">
              <Field source="NetworkUserName" title="Name" />
              <Field source="NetworkDomainName" title="Domain Name" />
            </Group>
            <Group ref="UserUpdateGroup" />
          </Column>
          <Column>
            <Group title="Dimension Combination">
              <Field source="DimensionCombNumber" title="Dim. Comb. No." />
            </Group>
            <Group title="Derived Company">
              <Grid>
                <Header cells="|Value|;|Overwrite|" title="" />
                <Row cells="CompanyNumber;OverwriteCompany#" title="Company No." />
              </Grid>
            </Group>
            <Group title="Derived Account">
              <Grid>
                <Header cells="|Value|;|Overwrite|" title="" />
                <Row cells="AccountNumber;OverwriteAccount#" title="Account No." />
              </Grid>
            </Group>
            <Group ref="DerivedDimensionGroup" />
            <Group title="Object Reference">
              <Field source="InternalRelationName" />
              <Field source="RelationNameVar" title="Relation Name" />
              <Field source="Key1Var" titleValue="KeyField1Var" />
              <Field source="Key2Var" titleValue="KeyField2Var" />
              <Field source="Key3Var" titleValue="KeyField3Var" />
              <Field source="Key4Var" titleValue="KeyField4Var" />
            </Group>
          </Column>
        </Row>
      </Form>
      <Form name="UserManagement">
        <Actions all="true">
          <Exclude>
            <Create />
          </Exclude>
          <Action source="primary-&gt;ResetPassword.Reset" title="Reset Password" />
        </Actions>
        <Row>
          <Column>
            <Group title="User">
              <Field source="NameOfUser" title="Name" />
              <Field source="EmployeeNumber" />
              <If condition="EmployeeNumber != ''">
                <Link workspace="Employees" template="Employee details..." title="" icon="WorkspaceLink">
                  <Style anchor="both" />
                  <Target pane="EmployeeFilter">
                    <Restriction template="Selected Employee" expression="EmployeeNumber=target.EmployeeNumber" />
                    <Focus>
                      <Match value="EmployeeNumber" field="EmployeeNumber" />
                    </Focus>
                  </Target>
                </Link>
              </If>
              <Reference foreignKey="EmployeeCompanyNumber_CompanyInformation" />
              <If condition="hasAddOn(128)">
                <Boolean source="TransferToPeoplePlanner" />
              </If>
            </Group>
            <Group title="User Type">
              <Field source="UserType" title="Type" />
              <Field source="Template" />
              <Boolean source="IsAdministrator" />
            </Group>
            <Group title="Validity">
              <Range firstSource="FromValidUser" lastSource="ToValidUser" title="Period" />
              <Field source="AccessCodeExpiryDate" />
              <Boolean source="BlockedAccessCode" />
            </Group>
            <If condition="hasAddOn(118)">
              <Group title="Portal">
                <Field source="StandardComponent" />
                <Field source="ClientType" />
              </Group>
            </If>
            <Group title="Database User Name">
              <Field source="DatabaseNameOfUser" title="Name" />
              <Field source="DatabasePassword" title="Password" />
            </Group>
            <Group title="Network Username">
              <Field source="NetworkUserName" title="Name" />
              <Field source="NetworkDomainName" title="Domain Name" />
            </Group>
            <Group ref="UserUpdateGroup" />
          </Column>
          <Column>
            <Group title="Dimension Combination">
              <Field source="DimensionCombNumber" title="Dim. Comb. No." />
            </Group>
            <Group title="Derived Company">
              <Grid>
                <Header cells="|Value|;|Overwrite|" title="" />
                <Row cells="CompanyNumber;OverwriteCompany#" title="Company No." />
              </Grid>
            </Group>
            <Group title="Derived Account">
              <Grid>
                <Header cells="|Value|;|Overwrite|" title="" />
                <Row cells="AccountNumber;OverwriteAccount#" title="Account No." />
              </Grid>
            </Group>
            <Group ref="DerivedDimensionGroup" />
            <Group title="Object Reference">
              <Field source="InternalRelationName" />
              <Field source="RelationNameVar" title="Relation Name" />
              <Field source="Key1Var" titleValue="KeyField1Var" />
              <Field source="Key2Var" titleValue="KeyField2Var" />
              <Field source="Key3Var" titleValue="KeyField3Var" />
              <Field source="Key4Var" titleValue="KeyField4Var" />
            </Group>
          </Column>
        </Row>
      </Form>
    </UpperPane>
    <LowerPane>
      <Table name="Full">
        <Actions all="true" />
        <Columns>
          <Field source="GroupName" title="Groups" size="huge" />
        </Columns>
      </Table>
    </LowerPane>
  </Layout>
</MDML>

