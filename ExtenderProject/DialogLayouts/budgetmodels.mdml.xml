<?xml version="1.0" encoding="UTF-8"?>
<!-- RMA, 06/04/09: Create empty forms for every dialog (37642).-->
<!-- JSV, 02/07/09: Insert Original layout converted from mdl and filter layout (37802).-->
<!-- MJA, 27/10/09: Update Original layout and remove Empty layout (37802).-->
<!-- RMA, 02/11/09: An new, read-only pane for finance budget workspace (38085).-->
<!-- RMA, 16/12/09: Create wizard to create models (37635).-->
<!-- RMA, 04/01/10: Fix minimized filter information (38025).-->
<!-- RMA, 04/01/10: Wizard should have two steps that are similar to both modeled dialogs (38147).-->
<!-- JSV, 29/04/10: Use FullBoolean for Boolean fields open in new or update state (38472).-->
<!-- SJK, 21/05/10: Filter button restrictions converted to common expression language (38492).-->
<!-- KUN, 07/07/10: Added group and columns for user update information (38625).-->
<!-- BPE, 17/09/10: Changed layout to use global definition dimensions (38744). -->
<!-- BPE, 15/11/10: Updated wizard for creating new budget model (38147). -->
<!-- BPE, 17/11/10: Moved create action to filter (39097).-->
<!-- JSV, 29/11/10: Compact block for Original filter (39106).-->
<!-- BPE, 21/12/10: Displaying read-only boolean as field (39097).-->
<!-- CSK, 27/04/11: DimensionOrigin view added (39547).-->
<!-- PSZ, 20/06/11: Original layout should be placed as the first layout (39299).-->
<!-- CSK, 19/09/11: Minor layout improvements (39918).-->
<!-- CSK, 11/10/11: Possible to edit account in DimensionOrigin (39547).-->
<!-- BPE, 17/10/11: Expanding dialog to prepare for deletion of CreateBudgetModel dialog (40040).-->
<!-- CSK, 19/10/11: New removed from creation wizard title (40064).-->
<!-- PSZ, 17/11/11: Remove unused layouts (40180).-->
<MDML xmlns="http://www.deltek.com/ns/mdml" version="0.59">
  <Layout source="BudgetModels">
    <FilterPane>
      <Filter name="Standard">
        <Compact>
          <Description template="^1" arguments="BudgetModelName" />
        </Compact>
        <Columns>
          <Field source="BudgetModelName" />
          <Field source="BudgetType" />
          <Field source="Description" />
          <Field source="FiscalYear" />
          <Field source="PriceYear" />
          <Field source="Blocked" />
          <Field source="CreatedFromBudgetModel" />
          <Field source="CreatedFromBudgetVersionNumber" />
          <Field source="CreatedFromPriceRegisterName" />
          <Field source="CreatedFromPriceYear" />
        </Columns>
      </Filter>
      <Filter name="BudgetModelHome">
        <Actions>
          <Action source="with.Create" wizard="CreateBudgetModelWizard" />
        </Actions>
        <ControlBar>
          <Selection default="AllModels">
            <Option name="AllModels" title="All Models" />
            <Option name="MyModels" title="My Models" restriction="CreatedBy = maconomy:username()" />
            <Option name="NotBlocked" title="Not Blocked" restriction="not Blocked" />
          </Selection>
        </ControlBar>
        <Compact>
          <Description template="^1(^2), Price Year: ^3, Type: ^4" arguments="Description;BudgetModelName;FiscalYear;BudgetType" />
        </Compact>
        <Columns>
          <Field source="BudgetModelName" />
          <Field source="BudgetType" />
          <Field source="Description" />
          <Field source="FiscalYear" />
          <Field source="PriceYear" />
          <Field source="Blocked" />
          <Field source="CreatedFromBudgetModel" />
          <Field source="CreatedFromBudgetVersionNumber" />
          <Field source="CreatedFromPriceRegisterName" />
          <Field source="CreatedFromPriceYear" />
        </Columns>
      </Filter>
    </FilterPane>
    <UpperPane>
      <Define>
        <Include fragment="GD_Dimensions" />
      </Define>
      <Wizard name="CreateBudgetModelWizard" title="Create Budget Model">
        <Page form="CreateBudgetModelPage1" title="New Budget Model Configuration" description="Specify configuration of a new Budget Model" />
        <If condition="CreatedFromBudgetModel != ''">
          <Page form="CreateBudgetModelPage2" title="Copied Budget Model Configuration" description="Select how the new budget is created from the referenced one." />
        </If>
      </Wizard>
      <Form name="Full">
        <Actions all="true" />
        <Column>
          <Group title="Budget Model">
            <Field source="BudgetModelName" />
            <Field source="Description" />
            <Field source="BudgetType" title="Budget Type" />
            <Field source="FiscalYear" />
            <Field source="PriceYear" />
            <Boolean source="Blocked" />
          </Group>
          <Group title="Period Variances">
            <Reference foreignKey="PeriodDifference_DimensionCombHeader" titleSource="PeriodDifference" keyShadowTitle="Dim. Comb. No." descriptionShadowTitle="Description" />
            <Field source="EntryText" />
          </Group>
          <Group title="Version Information">
            <Field source="VersionTypeVar" title="Version Type" />
            <Field source="VersionRemarkVar" title="Remarks{sg}" />
          </Group>
          <Group ref="UserUpdateGroup" />
        </Column>
        <Column>
          <Group title="Basis">
            <Reference foreignKey="CreatedFromBudgetModel_BudgetModel" title="Budget Model" keyShadowTitle="Name" descriptionShadowTitle="Description" />
            <Field source="CreatedFromBudgetVersionNumber" title="Version{No.}" />
            <Field source="CreatedFromPriceYear" title="Price Year" />
            <Reference foreignKey="CreatedFromPriceRegisterName_PriceRegisterHeader" title="Price Register" keyShadowTitle="Name" descriptionShadowTitle="Description" />
            <Reference foreignKey="DifferenceAccountVar_DimensionCombHeader" title="Difference Account" descriptionShadowTitle="Description" />
            <Field source="NewEntryTextVar" title="Entry Description" />
            <Field source="ReferenceDateVar" title="Reference Date" />
            <Boolean source="CreatePerEntryVar" title="Keep Budget Entries" />
          </Group>
          <Group title="New Budget Model">
            <Reference foreignKey="NewCompanyNumberVar_CompanyInformation" />
            <Reference foreignKey="NewAccountNumberVar_Account" />
            <BooleanGroup title="Reset">
              <Boolean source="NewCustomerNumberVar" title="Customer No.{Debitor}" />
              <Boolean source="NewVendorNumberVar" title="Vendor No.{Creditor}" />
              <Boolean source="NewJobNumberVar" title="Job No." />
              <Boolean source="NewActivityNumberVar" title="Activity No." />
              <Boolean source="NewTaskNameVar" title="Task Name" />
              <Boolean source="NewEmployeeNumberVar" title="Employee No." />
              <Boolean source="NewItemNumberVar" title="Item No." />
              <Boolean source="NewAssetNumberVar" title="Asset No." />
            </BooleanGroup>
          </Group>
          <Group ref="DimensionNewVarBoolGroup" />
        </Column>
      </Form>
      <Form name="CreateBudgetModelPage1">
        <Actions all="true" />
        <Column>
          <Group title="Budget Model">
            <Field source="BudgetModelName" />
            <Field source="Description" />
            <Field source="BudgetType" title="Budget Type" />
            <Field source="FiscalYear" />
            <Field source="PriceYear" />
            <Boolean source="Blocked" />
          </Group>
          <Group title="Period Variances">
            <Reference foreignKey="PeriodDifference_DimensionCombHeader" titleSource="PeriodDifference" keyShadowTitle="Dim. Comb. No." descriptionShadowTitle="Description" />
            <Field source="EntryText" />
          </Group>
          <Group title="Basis of Budget Model">
            <Reference foreignKey="CreatedFromBudgetModel_BudgetModel" title="Budget Model" keyShadowTitle="Name" descriptionShadowTitle="Description" />
            <Field source="CreatedFromBudgetVersionNumber" title="Version{No.}" />
            <Reference foreignKey="CreatedFromPriceRegisterName_PriceRegisterHeader" title="Price Register" keyShadowTitle="Name" descriptionShadowTitle="Description" />
          </Group>
        </Column>
      </Form>
      <Form name="CreateBudgetModelPage2">
        <Actions all="true" />
        <Column>
          <Group title="Basis">
            <Reference foreignKey="DifferenceAccountVar_DimensionCombHeader" title="Difference Account" descriptionShadowTitle="Description" />
            <Field source="NewEntryTextVar" title="Entry Description" />
            <Field source="ReferenceDateVar" title="Reference Date" />
            <Boolean source="CreatePerEntryVar" title="Keep Budget Entries" />
          </Group>
          <Group title="New Budget Model">
            <Reference foreignKey="NewCompanyNumberVar_CompanyInformation" />
            <Reference foreignKey="NewAccountNumberVar_Account" />
            <BooleanGroup title="Reset">
              <Boolean source="NewCustomerNumberVar" title="Customer No.{Debitor}" />
              <Boolean source="NewVendorNumberVar" title="Vendor No.{Creditor}" />
              <Boolean source="NewJobNumberVar" title="Job No." />
              <Boolean source="NewActivityNumberVar" title="Activity No." />
              <Boolean source="NewTaskNameVar" title="Task Name" />
              <Boolean source="NewEmployeeNumberVar" title="Employee No." />
              <Boolean source="NewItemNumberVar" title="Item No." />
              <Boolean source="NewAssetNumberVar" title="Asset No." />
            </BooleanGroup>
          </Group>
          <Group ref="DimensionNewVarBoolGroup" />
        </Column>
      </Form>
      <Form name="FinanceBudgetHomeKPI">
        <Column>
          <Group title="Budget Model">
            <Field source="BudgetModelName" />
            <Field source="Description" />
            <Field source="BudgetType" title="Budget Type" />
            <Field source="FiscalYear" />
            <Field source="PriceYear" />
            <Field source="Blocked" />
          </Group>
        </Column>
        <Column>
          <Group title="Basis">
            <Field source="CreatedFromBudgetModel" title="Name" />
            <Field source="CreatedFromBudgetVersionNumber" title="Version{No.}" />
            <Field source="CreatedFromPriceYear" title="Price Year" />
            <Field source="CreatedFromPriceRegisterName" title="Price Register" />
          </Group>
        </Column>
      </Form>
      <Form name="Custom_RoleRestricted_DimensionOrigin" open="false">
        <Actions>
          <Update />
          <Print />
          <PrintThis />
        </Actions>
        <Row>
        <If condition="hasRole('Finance Admin')" >
        <Column style="fullWidth">
          <Group title="Budget Model">
            <Field source="BudgetModelName" />
            <Field source="Description" />
            <Field source="BudgetType" title="Budget Type" />
            <Field source="FiscalYear" />
            <Field source="PriceYear" />
            <Field source="Blocked" />
          </Group>
          <Group title="Period Variances">
            <Field source="PeriodDifference" style="highlightRow" open="true" />
            <Field source="EntryText" />
          </Group>
          <Group title="Version Information">
            <Field source="VersionTypeVar" title="Version Type" />
            <Field source="VersionRemarkVar" title="Remarks{sg}" />
          </Group>
        </Column>
        <Column>
          <Group title="Basis">
            <Field source="CreatedFromBudgetModel" title="Name" />
            <Field source="CreatedFromBudgetVersionNumber" title="Version{No.}" />
            <Field source="CreatedFromPriceYear" title="Price Year" />
            <Field source="CreatedFromPriceRegisterName" title="Price Register" />
          </Group>
          <Group ref="UserUpdateGroup" />
        </Column>
        </If>
        <Else>
        <Column style="fullWidth">
          <Group title="Budget Model">
            <Field source="BudgetModelName" />
            <Field source="Description" />
            <Field source="BudgetType" title="Budget Type" />
            <Field source="FiscalYear" />
            <Field source="PriceYear" />
            <Field source="Blocked" />
          </Group>
          <Group title="Period Variances">
            <Field source="PeriodDifference" style="highlightRow" open="false" />
            <Field source="EntryText" />
          </Group>
          <Group title="Version Information">
            <Field source="VersionTypeVar" title="Version Type" />
            <Field source="VersionRemarkVar" title="Remarks{sg}" />
          </Group>
        </Column>
        <Column>
          <Group title="Basis">
            <Field source="CreatedFromBudgetModel" title="Name" />
            <Field source="CreatedFromBudgetVersionNumber" title="Version{No.}" />
            <Field source="CreatedFromPriceYear" title="Price Year" />
            <Field source="CreatedFromPriceRegisterName" title="Price Register" />
          </Group>
          <Group ref="UserUpdateGroup" />
        </Column>
        </Else>
        </Row>
      </Form>
      <Form name="DimensionOrigin" open="false">
        <Actions>
          <Update />
          <Print />
          <PrintThis />
        </Actions>
        <Column style="fullWidth">
          <Group title="Budget Model">
            <Field source="BudgetModelName" />
            <Field source="Description" />
            <Field source="BudgetType" title="Budget Type" />
            <Field source="FiscalYear" />
            <Field source="PriceYear" />
            <Field source="Blocked" />
          </Group>
          <Group title="Period Variances">
            <Field source="PeriodDifference" style="highlightRow" open="true" />
            <Field source="EntryText" />
          </Group>
          <Group title="Version Information">
            <Field source="VersionTypeVar" title="Version Type" />
            <Field source="VersionRemarkVar" title="Remarks{sg}" />
          </Group>
        </Column>
        <Column>
          <Group title="Basis">
            <Field source="CreatedFromBudgetModel" title="Name" />
            <Field source="CreatedFromBudgetVersionNumber" title="Version{No.}" />
            <Field source="CreatedFromPriceYear" title="Price Year" />
            <Field source="CreatedFromPriceRegisterName" title="Price Register" />
          </Group>
          <Group ref="UserUpdateGroup" />
        </Column>
      </Form>
      <Form name="Information">
        <Actions all="true">
          <Exclude>
            <Create />
          </Exclude>
        </Actions>
        <Column style="fullWidth">
          <Group title="Budget Model">
            <Field source="BudgetModelName" />
            <Field source="Description" />
            <Field source="BudgetType" title="Budget Type" />
            <Field source="FiscalYear" />
            <Field source="PriceYear" />
            <Boolean source="Blocked" />
          </Group>
          <Group title="Period Variances">
            <Field source="PeriodDifference" />
            <Field source="EntryText" />
          </Group>
          <Group title="Version Information">
            <Field source="VersionTypeVar" title="Version Type" />
            <Field source="VersionRemarkVar" title="Remarks{sg}" />
          </Group>
        </Column>
        <Column>
          <Group title="Basis">
            <Field source="CreatedFromBudgetModel" title="Name" />
            <Field source="CreatedFromBudgetVersionNumber" title="Version{No.}" />
            <Field source="CreatedFromPriceYear" title="Price Year" />
            <Field source="CreatedFromPriceRegisterName" title="Price Register" />
          </Group>
          <Group ref="UserUpdateGroup" />
        </Column>
      </Form>
    </UpperPane>
    <LowerPane>
      <Table name="Custom_RoleRestricted_Full">
        <Actions all="true" />
        <Columns>
        <If condition="hasRole('Finance Admin')" >
          <Field source="BudgetVersionNumber" title="Version{No.}" />
          <Field source="BudgetVersionType" title="Version Type" />
          <Field source="CreatedBy" title="Created by" />
          <Field source="CreatedDate" title="Date" />
          <Field source="Remark" title="Remarks{sg}" />
          </If>
          <Else>
          <Field source="BudgetVersionNumber" title="Version{No.}" open="false" />
          <Field source="BudgetVersionType" title="Version Type" open="false" />
          <Field source="CreatedBy" title="Created by" open="false" />
          <Field source="CreatedDate" title="Date" open="false" />
          <Field source="Remark" title="Remarks{sg}" open="false" />
          </Else>
        </Columns>
      </Table>
      <Table name="Full">
        <Actions all="true" />
        <Columns>
          <Field source="BudgetVersionNumber" title="Version{No.}" />
          <Field source="BudgetVersionType" title="Version Type" />
          <Field source="CreatedBy" title="Created by" />
          <Field source="CreatedDate" title="Date" />
          <Field source="Remark" title="Remarks{sg}" />
        </Columns>
      </Table>
      <Table name="Readonly">
        <Columns>
          <Field source="BudgetVersionNumber" title="Version{No.}" />
          <Field source="BudgetVersionType" title="Version Type" />
          <Field source="CreatedBy" title="Created by" />
          <Field source="CreatedDate" title="Date" />
          <Field source="Remark" title="Remarks{sg}" />
        </Columns>
      </Table>
    </LowerPane>
  </Layout>
</MDML>

