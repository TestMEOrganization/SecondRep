<?xml version="1.0" encoding="UTF-8"?>
<!-- RMA, 06/04/09: Create empty forms for every dialog (37642).-->
<!-- JSV, 02/07/09: Insert Original layout converted from mdl and filter layout (37802).-->
<!-- MJA, 27/10/09: Update Original layout and remove Empty layout (37802).-->
<!-- JSV, 29/04/10: Use FullBoolean for Boolean fields open in new or update state (38472).-->
<!-- BPE, 17/09/10: Changed layout to use global definition dimensions (38744). -->
<!-- PBO, 22/09/10: Implement conditional layout (38843).-->
<!-- JSV, 29/11/10: Compact block for Original filter (39106).-->
<!-- PSZ, 03/12/10: Use onDemand suggestions for relevant fields (39127).-->
<!-- CSK, 19/09/11: Minor layout improvements (39918).-->
<MDML xmlns="http://www.deltek.com/ns/mdml" version="0.59">
  <Layout source="IntercompanyInvoicing">
    <FilterPane>
      <Filter name="Standard">
        <Compact>
          <Description template="^1 (^2)" arguments="Name1;CompanyNumber" />
        </Compact>
        <Columns>
          <Field source="CompanyNumber" />
          <Field source="Name1" />
          <Field source="Name2" />
          <Field source="Name3" />
          <Field source="ZipCode" />
          <Field source="PostalDistrict" />
          <Field source="Name4" />
          <Field source="Name5" />
          <Field source="Country" />
          <Field source="Telephone" />
        </Columns>
      </Filter>
    </FilterPane>
    <UpperPane>
      <Define>
        <Include fragment="GD_Dimensions" />
      </Define>
      <Form name="Full">
        <Actions all="true" />
        <Row>
          <Column>
            <Group title="Executing Company">
              <Field source="CompanyNumber" />
              <Field source="Name1" appearance="maximized" />
              <If condition="Name2!=''">
                <Field source="Name2" appearance="maximized" />
              </If>
              <If condition="Name3!=''">
                <Field source="Name3" appearance="maximized" />
              </If>
              <If condition="PostalDistrict!=''">
                <ZipCity citySource="PostalDistrict" zipSource="ZipCode" appearance="maximized" />
              </If>
              <If condition="Name4!=''">
                <Field source="Name4" appearance="maximized" />
              </If>
              <If condition="Name5!=''">
                <Field source="Name5" appearance="maximized" />
              </If>
              <If condition="Country!=CountryType'nil">
                <Field source="Country" appearance="maximized" />
              </If>
            </Group>
            <Group title="Invoice{noun}" style="fullWidth">
              <Field source="AmountBaseExecutingVar" title="Amount, Base, Executing" />
              <Field source="InvoiceDateVar" title="Invoice Date" />
              <Field source="InvoiceTextVar" title="Invoice Text" />
            </Group>
            <Group title="Print Control">
              <Field source="LayoutName" title="Layout, Invoice" />
              <Field source="LayoutNameCreditMemoVar" title="Layout, Credit Memo" />
            </Group>
          </Column>
          <Column>
            <Group title="Selection Criteria">
              <Boolean source="ShowLinesVar" title="Show Lines" />
              <Field source="IntercompanyTypeVar" title="Intercompany Type" appearance="interval" />
              <Interval firstSource="FromEntryDateVar" lastSource="ToEntryDateVar" title="Entry Date" />
              <Interval firstSource="FromResponsibleCompanyNumberVar" lastSource="ToResponsibleCompanyNumberVar" title="Responsible Company" />
              <Interval firstSource="FromJobNumberVar" lastSource="ToJobNumberVar" title="Job No." />
              <Interval firstSource="FromEmployeeNumberVar" lastSource="ToEmployeeNumberVar" title="Employee No." />
              <Interval firstSource="FromActivityNumberVar" lastSource="ToActivityNumberVar" title="Activity No." />
              <Interval firstSource="FromTaskNameVar" lastSource="ToTaskNameVar" title="Task" />
              <Interval firstSource="FromCustomerNumberVar" lastSource="ToCustomerNumberVar" title="Customer No.{Debitor}" />
              <Interval firstSource="FromVendorNumberVar" lastSource="ToVendorNumberVar" title="Vendor No.{Creditor}" />
              <Interval firstSource="FromAssetNumberVar" lastSource="ToAssetNumberVar" title="Asset No." />
              <Interval firstSource="FromItemNumberVar" lastSource="ToItemNumberVar" title="Item No." />
            </Group>
          </Column>
          <Column>
            <Group ref="DimensionsVarTargetGroupIntervals" />
          </Column>
        </Row>
      </Form>
      <Form name="Custom" open="hasRole('Finance Admin')">
        <Actions all="true" />
        <Row>
          <Column>
            <Group title="Executing Company">
              <Field source="CompanyNumber" />
              <Field source="Name1" appearance="maximized" />
              <If condition="Name2!=''">
                <Field source="Name2" appearance="maximized" />
              </If>
              <If condition="Name3!=''">
                <Field source="Name3" appearance="maximized" />
              </If>
              <If condition="PostalDistrict!=''">
                <ZipCity citySource="PostalDistrict" zipSource="ZipCode" appearance="maximized" />
              </If>
              <If condition="Name4!=''">
                <Field source="Name4" appearance="maximized" />
              </If>
              <If condition="Name5!=''">
                <Field source="Name5" appearance="maximized" />
              </If>
              <If condition="Country!=CountryType'nil">
                <Field source="Country" appearance="maximized" />
              </If>
            </Group>
            <Group title="Invoice{noun}" style="fullWidth">
              <Field source="AmountBaseExecutingVar" title="Amount, Base, Executing" />
              <Field source="InvoiceDateVar" title="Invoice Date" />
              <Field source="InvoiceTextVar" title="Invoice Text" />
            </Group>
            <Group title="Print Control">
              <Field source="LayoutName" title="Layout, Invoice" />
              <Field source="LayoutNameCreditMemoVar" title="Layout, Credit Memo" />
            </Group>
          </Column>
          <Column>
            <Group title="Selection Criteria">
              <Boolean source="ShowLinesVar" title="Show Lines" />
              <Field source="IntercompanyTypeVar" title="Intercompany Type" appearance="interval" />
              <Interval firstSource="FromEntryDateVar" lastSource="ToEntryDateVar" title="Entry Date" />
              <Interval firstSource="FromResponsibleCompanyNumberVar" lastSource="ToResponsibleCompanyNumberVar" title="Responsible Company" />
              <Interval firstSource="FromJobNumberVar" lastSource="ToJobNumberVar" title="Job No." />
              <Interval firstSource="FromEmployeeNumberVar" lastSource="ToEmployeeNumberVar" title="Employee No." />
              <Interval firstSource="FromActivityNumberVar" lastSource="ToActivityNumberVar" title="Activity No." />
              <Interval firstSource="FromTaskNameVar" lastSource="ToTaskNameVar" title="Task" />
              <Interval firstSource="FromCustomerNumberVar" lastSource="ToCustomerNumberVar" title="Customer No.{Debitor}" />
              <Interval firstSource="FromVendorNumberVar" lastSource="ToVendorNumberVar" title="Vendor No.{Creditor}" />
              <Interval firstSource="FromAssetNumberVar" lastSource="ToAssetNumberVar" title="Asset No." />
              <Interval firstSource="FromItemNumberVar" lastSource="ToItemNumberVar" title="Item No." />
            </Group>
          </Column>
          <Column>
            <Group ref="DimensionsVarTargetGroupIntervals" />
          </Column>
        </Row>
      </Form>
    </UpperPane>
    <LowerPane>
      <Define>
        <Include fragment="GD_Dimensions" />
      </Define>
      <Table name="Full">
        <Actions all="true" />
        <Columns>
          <Field source="ResponsibleCompanyNumber" />
          <Field source="ResponsibleCompanyNameVar" title="Resp. Company Name" />
          <Field source="EntryDate" />
          <Field source="PostingDate" />
          <Field source="TransactionNumber" />
          <Field source="TransactionType" title="Trans. Type" />
          <Field source="EntryText" />
          <Field source="MarkedForInvoicing" />
          <Field source="AmountBaseExecuting" />
          <Field source="AmountBaseResponsible" />
          <Field source="AmountCurrency" />
          <Field source="AmountEnterprise" />
          <Field source="Currency" />
          <Field source="ItemVATCode" />
          <If condition="maconomy:booleanSysPar('UseMultipleVATLevels')">
            <Field source="VATCodeInvoice" />
            <Field source="VATCodeVendorInvoice" />
            <Field source="VATCode2Invoice" />
            <Field source="VATCode2VendorInvoice" />
            <If condition="maconomy:booleanSysPar('ShowThreeVATLevels')">
              <Field source="VATCode3Invoice" />
              <Field source="VATCode3VendorInvoice" />
            </If>
          </If>
          <Else>
            <Field source="VATCodeInvoice" title="Tax Code, Invoice" />
            <Field source="VATCodeVendorInvoice" title="Tax Code, Vendor Invoice" />
          </Else>
          <Field source="IntercompanyType" />
          <Field source="AccountNumberExecuting" />
          <Field source="AccountNumberResponsible" />
          <Field source="JournalType" />
          <Field source="JournalNumber" />
          <Field source="JournalLineNumber" />
          <Field source="BasisAccount" />
          <Field source="AccountTextVar" title="Account Name" />
          <Columns ref="DimensionNameDescriptionColumns" />
          <Field source="JobNumber" />
          <Field source="JobNameVar" title="Job Name" />
          <Field source="EmployeeNumber" />
          <Field source="EmployeeNameVar" title="Employee Name" />
          <Field source="ActivityNumber" />
          <Field source="ActivityTextVar" title="Activity Name" />
          <Field source="TaskName" />
          <Field source="TaskDescriptionVar" title="Task Description" />
          <Field source="CustomerNumber" />
          <Field source="CustomerNameVar" title="Customer Name{Debitor}" />
          <Field source="VendorNumber" />
          <Field source="VendorNameVar" title="Vendor Name{Creditor}" />
          <Field source="SubledgerEntryNumber" />
          <Field source="AssetNumber" />
          <Field source="AssetNameVar" title="Asset Name" />
          <Field source="ItemNumber" />
          <Field source="ItemTextVar" title="Description{Item}" />
        </Columns>
      </Table>
      <Table name="Custom" open="hasRole('Finance Admin')">
        <Actions all="true" />
        <Columns>
          <Field source="ResponsibleCompanyNumber" />
          <Field source="ResponsibleCompanyNameVar" title="Resp. Company Name" />
          <Field source="EntryDate" />
          <Field source="PostingDate" />
          <Field source="TransactionNumber" />
          <Field source="TransactionType" title="Trans. Type" />
          <Field source="EntryText" />
          <Field source="MarkedForInvoicing" />
          <Field source="AmountBaseExecuting" />
          <Field source="AmountBaseResponsible" />
          <Field source="AmountCurrency" />
          <Field source="AmountEnterprise" />
          <Field source="Currency" />
          <Field source="ItemVATCode" />
          <If condition="maconomy:booleanSysPar('UseMultipleVATLevels')">
            <Field source="VATCodeInvoice" />
            <Field source="VATCodeVendorInvoice" />
            <Field source="VATCode2Invoice" />
            <Field source="VATCode2VendorInvoice" />
            <If condition="maconomy:booleanSysPar('ShowThreeVATLevels')">
              <Field source="VATCode3Invoice" />
              <Field source="VATCode3VendorInvoice" />
            </If>
          </If>
          <Else>
            <Field source="VATCodeInvoice" title="Tax Code, Invoice" />
            <Field source="VATCodeVendorInvoice" title="Tax Code, Vendor Invoice" />
          </Else>
          <Field source="IntercompanyType" />
          <Field source="AccountNumberExecuting" />
          <Field source="AccountNumberResponsible" />
          <Field source="JournalType" />
          <Field source="JournalNumber" />
          <Field source="JournalLineNumber" />
          <Field source="BasisAccount" />
          <Field source="AccountTextVar" title="Account Name" />
          <Columns ref="DimensionNameDescriptionColumns" />
          <Field source="JobNumber" />
          <Field source="JobNameVar" title="Job Name" />
          <Field source="EmployeeNumber" />
          <Field source="EmployeeNameVar" title="Employee Name" />
          <Field source="ActivityNumber" />
          <Field source="ActivityTextVar" title="Activity Name" />
          <Field source="TaskName" />
          <Field source="TaskDescriptionVar" title="Task Description" />
          <Field source="CustomerNumber" />
          <Field source="CustomerNameVar" title="Customer Name{Debitor}" />
          <Field source="VendorNumber" />
          <Field source="VendorNameVar" title="Vendor Name{Creditor}" />
          <Field source="SubledgerEntryNumber" />
          <Field source="AssetNumber" />
          <Field source="AssetNameVar" title="Asset Name" />
          <Field source="ItemNumber" />
          <Field source="ItemTextVar" title="Description{Item}" />
        </Columns>
      </Table>
    </LowerPane>
  </Layout>
</MDML>

