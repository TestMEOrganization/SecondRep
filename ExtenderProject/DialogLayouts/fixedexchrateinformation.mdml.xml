<?xml version="1.0" encoding="UTF-8"?>
<!-- RMA, 06/04/09: Create empty forms for every dialog (37642).-->
<!-- JSV, 02/07/09: Insert Original layout converted from mdl and filter layout (37802).-->
<!-- MJA, 27/10/09: Update Original layout and remove Empty layout (37802).-->
<!-- JSV, 29/04/10: Use FullBoolean for Boolean fields open in new or update state (38472).-->
<!-- KRN, 13/08/10: Demo layout (38644).-->
<!-- KRN, 13/09/10: Demo table layout for JobHome (38738).-->
<!-- KRN, 19/11/10: Supplement fields for descriptions (38986).-->
<!-- JSV, 29/11/10: Compact block for Original filter (39106).-->
<!-- KRN, 20/12/10: Wizards for copy exchange rates (38738).-->
<!-- PSZ, 20/06/11: Original layout should be placed as the first layout (39299).-->
<!-- PSZ, 11/07/11: PSO Jobs workspace changes (39759).-->
<!-- MJA, 02/12/11: Updated status fields (40195).-->
<MDML xmlns="http://www.deltek.com/ns/mdml" version="0.59">
  <Layout source="FixedExchRateInformation">
    <FilterPane>
      <Filter name="Standard">
        <Compact>
          <Description template="^1 (^2), ^3" arguments="JobName;JobNumber;Name1" />
        </Compact>
        <Columns>
          <Field source="JobNumber" />
          <Field source="JobName" />
          <Field source="JobGroup" />
          <Field source="NotInvoiceable" />
          <Field source="InternalJob" />
          <Field source="Status" />
          <Field source="ConvertedBy" />
          <Field source="ConversionDate" />
          <Field source="ProjectManagerNumber" />
          <Field source="SalesPersonNumber" />
        </Columns>
      </Filter>
    </FilterPane>
    <UpperPane>
      <Wizard name="CopyStandardExchangeRatesWizard" title="Copy Standard Exchange Rates to Job">
        <Page form="CopyStdExchRatesPage1" title="Select standard exchange rate table" />
      </Wizard>
      <Wizard name="CopyJobExchangeRatesWizard" title="Copy Job Exchange Rates to Job">
        <Page form="CopyJobExchRatesPage1" title="Select job" />
      </Wizard>
      <Form name="Full">
        <Actions all="true">
          <Action source="CopyStandardExchangeRatesToJob" wizard="CopyStandardExchangeRatesWizard" />
          <Action source="CopyJobExchangeRatesToJob" wizard="CopyJobExchangeRatesWizard" />
        </Actions>
        <Row>
          <Column>
            <Group title="Job">
              <Reference foreignKey="JobNumber_JobHeader" />
              <Field source="JobGroup" />
              <Boolean source="Template" />
              <Field source="Currency" />
              <Field source="InvoiceCurrency" />
              <Boolean source="BlockedForTimeRegistrations" title="Blocked for Time Reg." />
              <Boolean source="BlockedForAmountRegistrations" title="Blocked for Amount Reg." />
              <Boolean source="BlockedForInvoicing" />
              <Boolean source="BlockedForBudgeting" />
            </Group>
          </Column>
          <Column>
            <Group title="Company">
              <Reference foreignKey="CompanyNumber_CompanyInformation" />
              <Field source="BaseCurrency" />
            </Group>
            <Group title="Status">
              <If condition="FixedExchangeRatesUpdatedBy != ''">
                <Description template="^1 by ^2" arguments="FixedExchangeRatesUpdatedDate;FixedExchangeRatesUpdatedBy" title="Budgets Updated" />
              </If>
              <Else>
                <Description template="" title="Budgets not Updated" />
              </Else>
            </Group>
          </Column>
        </Row>
        <Row>
          <Group title="Fixed System Exchange Rates">
            <Field source="FixedExchangeRateDateVar" title="Fixed Exchange Rate Date" />
            <Field source="FixedPurchaseExchangeRateTableVar" title="Fixed Exch. Rate Tbl., Purch." />
            <Field source="FixedSalesExchangeRateTableVar" title="Fixed Exch. Rate Tbl., Sales" />
          </Group>
        </Row>
        <Row>
          <Group title="Job Specific Fixed Exchange Rates">
            <Boolean source="UseFixedExchangeRateFromJob" title="Use Fixed Exchange Rates from Job" />
            <Reference foreignKey="CopyFromJobNumberVar_JobHeader" />
            <Field source="StandardExchangeRateDateVar" title="Standard Exchange Rate Date" />
            <Field source="StandardExchangeRateTableVar" title="Standard Exchange Rate Table" />
            <EmptyLabel />
            <Field source="ReferenceCurrencyVar" title="Reference Currency" />
            <If condition="CreatedByVar != ''">
              <Description template="^1 by ^2" arguments="CreatedDateVar;CreatedByVar" title="Created" />
            </If>
            <Else>
              <Description template="" title="Created" />
            </Else>
            <If condition="ChangedByVar != ''">
              <Description template="^1 by ^2" arguments="ChangedDateVar;ChangedByVar" title="Changed" />
            </If>
            <Else>
              <Description template="" title="Changed" />
            </Else>
            <Field source="VersionNumberVar" title="Version" />
          </Group>
        </Row>
      </Form>
      <Form name="CopyStdExchRatesPage1">
        <Actions>
          <Update />
        </Actions>
        <Row>
          <Group>
            <Field source="StandardExchangeRateDateVar" title="Exchange Rate Date" />
            <Field source="StandardExchangeRateTableVar" mandatory="true" title="Exchange Rate Table" />
          </Group>
        </Row>
      </Form>
      <Form name="CopyJobExchRatesPage1">
        <Actions>
          <Update />
        </Actions>
        <Row>
          <Group>
            <Reference foreignKey="CopyFromJobNumberVar_JobHeader" keyMandatory="true" />
          </Group>
        </Row>
      </Form>
      <Form name="JobHome_Prices">
        <Actions all="not HasPMReadOnly()">
          <Action source="CopyStandardExchangeRatesToJob" wizard="CopyStandardExchangeRatesWizard" disabled="HasPMReadOnly()" />
          <Action source="CopyJobExchangeRatesToJob" wizard="CopyJobExchangeRatesWizard" disabled="HasPMReadOnly()" />
        </Actions>
        <Row>
          <Group title="Fixed System Exchange Rates">
            <Field source="FixedExchangeRateDateVar" title="Fixed Exchange Rate Date" />
            <Field source="FixedPurchaseExchangeRateTableVar" title="Fixed Exch. Rate Tbl., Purch." />
            <Field source="FixedSalesExchangeRateTableVar" title="Fixed Exch. Rate Tbl., Sales" />
          </Group>
          <Group title="Job Specific Fixed Exchange Rates">
            <Boolean source="UseFixedExchangeRateFromJob" title="Use Fixed Exchange Rates from Job" />
            <Field source="StandardExchangeRateDateVar" title="Standard Exchange Rate Date" />
            <Field source="StandardExchangeRateTableVar" title="Standard Exchange Rate Table" />
            <EmptyLabel />
            <Field source="ReferenceCurrencyVar" title="Reference Currency" />
            <If condition="CreatedByVar != ''">
              <Description template="^1 by ^2" arguments="CreatedDateVar;CreatedByVar" title="Created" />
            </If>
            <Else>
              <Description template="" title="Created" />
            </Else>
            <If condition="ChangedByVar != ''">
              <Description template="^1 by ^2" arguments="ChangedDateVar;ChangedByVar" title="Changed" />
            </If>
            <Else>
              <Description template="" title="Changed" />
            </Else>
            <Field source="VersionNumberVar" title="Version" />
          </Group>
        </Row>
      </Form>
      <Form name="Demo">
        <Actions all="true">
          <Action source="CopyStandardExchangeRatesToJob" wizard="CopyStandardExchangeRatesWizard" />
          <Action source="CopyJobExchangeRatesToJob" wizard="CopyJobExchangeRatesWizard" />
        </Actions>
        <Row>
          <Column>
            <Group title="Job">
              <Field source="Currency" />
              <Field source="InvoiceCurrency" />
            </Group>
            <Group title="Company">
              <Reference foreignKey="CompanyNumber_CompanyInformation" />
              <Field source="BaseCurrency" />
            </Group>
            <Group title="Status">
              <If condition="FixedExchangeRatesUpdatedBy != ''">
                <Description template="^1 by ^2" arguments="FixedExchangeRatesUpdatedDate;FixedExchangeRatesUpdatedBy" title="Budgets Updated" />
              </If>
              <Else>
                <Description template="" title="Budgets not Updated" />
              </Else>
            </Group>
          </Column>
          <Column>
            <Group title="Fixed System Exchange Rates">
              <Field source="FixedExchangeRateDateVar" title="Fixed Exchange Rate Date" />
              <Field source="FixedPurchaseExchangeRateTableVar" title="Fixed Exch. Rate Tbl., Purch." />
              <Field source="FixedSalesExchangeRateTableVar" title="Fixed Exch. Rate Tbl., Sales" />
            </Group>
            <Group title="Job Specific Fixed Exchange Rates">
              <Boolean source="UseFixedExchangeRateFromJob" title="Use Fixed Exchange Rates from Job" />
              <Reference foreignKey="CopyFromJobNumberVar_JobHeader" />
              <Field source="StandardExchangeRateDateVar" title="Standard Exchange Rate Date" />
              <Field source="StandardExchangeRateTableVar" title="Standard Exchange Rate Table" />
              <EmptyLabel />
              <Field source="ReferenceCurrencyVar" title="Reference Currency" />
              <If condition="CreatedByVar != ''">
                <Description template="^1 by ^2" arguments="CreatedDateVar;CreatedByVar" title="Created" />
              </If>
              <Else>
                <Description template="" title="Created" />
              </Else>
              <If condition="ChangedByVar != ''">
                <Description template="^1 by ^2" arguments="ChangedDateVar;ChangedByVar" title="Changed" />
              </If>
              <Else>
                <Description template="" title="Changed" />
              </Else>
              <Field source="VersionNumberVar" title="Version" />
            </Group>
          </Column>
        </Row>
      </Form>
    </UpperPane>
    <LowerPane>
      <Table name="Full">
        <Actions all="true" />
        <Columns>
          <Field source="StartingDate" title="Date" />
          <Field source="Currency" />
          <Field source="ExchangeRate" title="Exchange Rate" />
        </Columns>
      </Table>
      <Table name="Demo_JobHome">
        <Actions all="true">
          <Action source="parent.UpdateExchangeRatesInJobBudgets" />
        </Actions>
        <Columns>
          <Field source="StartingDate" title="Date" />
          <Field source="Currency" />
          <Field source="ExchangeRate" title="Exchange Rate" />
        </Columns>
      </Table>
    </LowerPane>
  </Layout>
</MDML>

