<?xml version="1.0" encoding="UTF-8"?>
<!--fff41e91c7dbce8573c066206f0322d8c4a8d998-->
<!--
  Revision=191a890063347ac5105d387c300b16c33e205212
  RevisionTag=v2012.04.19_12.05.13_MartinKjeldsen
  Layer=Custom
  Deployer=admin
  Time=19-04-12 12:05
  StampVersion=1
-->
<!--f20f4d91ad45b4900618ff4ab712ffd7a21dd702-->
<!--
  Revision=879fe3ff52aabe538ae6404343bf898b1abe6f1f
  RevisionTag=v2012.03.02_01.15.33_MartinKjeldsen
  Layer=Custom
  Deployer=MartinKjeldsen
  Time=02-03-12 01:16
  StampVersion=1
-->
<!--
  #Message-digest 6d611df3d21c5931472b2baafc590857   3 _ _   213
  TAC*Format: XML
  TAC_isLicense: no
  TAC_Version: 2
  TAC_Author: Release Manager
  TAC_Organization: Maconomy R&D
  TAC_CreationDate: 28.10.2011
  TAC_CreationTime: 14:31:20
  TAC*MaconomyHQ: yes
-->
<!-- RMA, 06/04/09: Create empty forms for every dialog (37642).-->
<!-- SJK, 20/04/09: Standard card and Main table (37651).-->
<!-- JSV, 02/07/09: Insert Original layout converted from mdl and filter layout (37802).-->
<!-- MJA, 27/10/09: Update Original layout and remove Empty layout (37802).-->
<!-- SJK, 09/12/09: Demo layout (38153).-->
<!-- JSV, 29/04/10: Use FullBoolean for Boolean fields open in new or update state (38472).-->
<!-- KUN, 07/07/10: Added group and columns for user update information (38625).-->
<!-- BPE, 01/09/10: Changed layout to use global definition dimensions (38745). -->
<!-- PBO, 22/09/10: Implement conditional layout (38843).-->
<!-- SBA, 27/09/10: Summary lines in tree-structure should be bold face (38908).-->
<!-- SBA, 11/10/10: Changes to copy budget wizard (38059).-->
<!-- JSV, 29/11/10: Compact block for Original filter (39106).-->
<!-- PSZ, 03/12/10: Use onDemand suggestions for relevant fields (39127).-->
<!-- PSZ, 09/12/10: Improve the look of the layout (38805).-->
<!-- SBA, 17/12/10: Styles should apply to labels (39243).-->
<!-- PSZ, 20/06/11: Original layout should be placed as the first layout (39299).-->
<!-- PSZ, 11/07/11: PSO Jobs workspace changes (39759).-->
<!-- PSZ, 17/08/11: Added External Description to table layouts (39850).-->
<!-- JSV, 24/08/11: Use reference element where possible (39874).-->
<!-- JSV, 30/08/11: Description source for reference on CustomerNumber_Customer (39874).-->
<!-- SBA, 16/09/11: Make mandatory=true for CopyFromBudgetTypeVar (39949). -->
<!-- MJA, 19/09/11: Add Integration Status information (39881).-->
<!-- SBA, 20/09/11: Close cells conditionally (39955). -->
<!-- PSZ, 27/09/11: Add missing CurrentBudgetType field (39975).-->
<MDML xmlns="http://www.deltek.com/ns/mdml" version="0.59">
  <Layout source="JobBudgets">
    <FilterPane>
      <Filter name="Standard">
        <Compact>
          <Description template="^1 (^2), ^3" arguments="JobName;JobNumber;Name1" />
        </Compact>
        <Columns>
          <Field source="JobNumber" />
          <Field source="JobName" />
          <Field source="JobGroup" />
          <Field source="NotInvoiceable" />
          <Field source="InternalJob" />
          <Field source="Status" />
          <Field source="ConvertedBy" />
          <Field source="ConversionDate" />
          <Field source="ProjectManagerNumber" />
          <Field source="SalesPersonNumber" />
        </Columns>
      </Filter>
    </FilterPane>
    <UpperPane>
      <Define>
        <Function name="divXY" value="x/y" parameters="x y" />
        <Function name="profitability" value="(x-y)/z" parameters="x y z" />
        <Trigger name="refresh">
          <Assign source="DefaultLineType" value="jobbudgetlinetypetype'\time\" />
        </Trigger>
      </Define>
      <Wizard name="CopyBudgetWizard" title="Copy Budget">
        <Page form="CopyBudgetPage1" title="Select Budget to Copy" />
      </Wizard>
      <Wizard name="CopyBudgetWizard_ram" title="Copy Budget">
        <Page form="CopyBudgetPage1_ram" title="Select Budget to Copy" />
      </Wizard>
      <Form name="Full">
        <Actions all="true">
          <Exclude>
            <Action source="MarkAllForDailyDescriptions" title="" tooltip="" />
            <Action source="UnmarkAllForDailyDescriptions" title="" tooltip="" />
          </Exclude>
          <Action source="CopyBudget" wizard="CopyBudgetWizard" />
          <Create />
          <Update />
          <Delete />
          <Print />
          <PrintThis />
        </Actions>
        <Row>
          <Column>
            <Group title="Job">
              <Reference foreignKey="JobNumber_JobHeader" />
              <Field source="JobGroup" />
              <Field source="Status" />
              <Boolean source="Template" />
              <Field source="Responsible" />
              <Field source="Closed" />
            </Group>
          </Column>
          <Column>
            <Group title="Budget Type">
              <Field source="ShowBudgetTypeVar" title="Show Budget" />
              <Field source="CurrentBudgetType" />
              <Field source="CurrentForecastBudgetType" />
              <Field source="CurrentPlanningBudgetType" />
            </Group>
            <Group title="Customer">
              <Reference foreignKey="CustomerNumber_Customer" descriptionSource="Name1" />
            </Group>
          </Column>
        </Row>
        <Row>
          <Column>
            <Group title="Employee Category Prices">
              <Grid>
                <Define>
                  <Style name="anchorLeft">
                    <Label anchor="left" justify="left" bold="true" />
                  </Style>
                  <Style name="anchorRight">
                    <Label anchor="right" justify="right" bold="true" />
                  </Style>
                </Define>
                <Header cells="||Employee Category||;||Billing Price||;||Cost Price||">
                  <Style ref="anchorLeft;anchorRight;anchorRight" />
                </Header>
                <Header cells="|No.|;|Name|;|Hour|;|Day|;|Hour|;|Days|">
                  <Style ref="anchorLeft;anchorLeft;anchorRight;anchorRight;anchorRight;anchorRight" />
                </Header>
                <Scope>
                  <Style>
                    <Amount size="small" />
                  </Style>
                  <Row cells="EmployeeCategoryNumber1Var;EmployeeCategoryName1Var;EmployeeCategoryBillingPrice1Var;EmployeeCategoryBillingPricePerDay1Var;EmployeeCategoryCostPrice1Var;EmployeeCategoryCostPricePerDay1Var" />
                  <Row cells="EmployeeCategoryNumber2Var;EmployeeCategoryName2Var;EmployeeCategoryBillingPrice2Var;EmployeeCategoryBillingPricePerDay2Var;EmployeeCategoryCostPrice2Var;EmployeeCategoryCostPricePerDay2Var" />
                  <Row cells="EmployeeCategoryNumber3Var;EmployeeCategoryName3Var;EmployeeCategoryBillingPrice3Var;EmployeeCategoryBillingPricePerDay3Var;EmployeeCategoryCostPrice3Var;EmployeeCategoryCostPricePerDay3Var" />
                  <Row cells="EmployeeCategoryNumber4Var;EmployeeCategoryName4Var;EmployeeCategoryBillingPrice4Var;EmployeeCategoryBillingPricePerDay4Var;EmployeeCategoryCostPrice4Var;EmployeeCategoryCostPricePerDay4Var" />
                  <Row cells="EmployeeCategoryNumber5Var;EmployeeCategoryName5Var;EmployeeCategoryBillingPrice5Var;EmployeeCategoryBillingPricePerDay5Var;EmployeeCategoryCostPrice5Var;EmployeeCategoryCostPricePerDay5Var" />
                  <Row cells="EmployeeCategoryNumber6Var;EmployeeCategoryName6Var;EmployeeCategoryBillingPrice6Var;EmployeeCategoryBillingPricePerDay6Var;EmployeeCategoryCostPrice6Var;EmployeeCategoryCostPricePerDay6Var" />
                  <Row cells="EmployeeCategoryNumber7Var;EmployeeCategoryName7Var;EmployeeCategoryBillingPrice7Var;EmployeeCategoryBillingPricePerDay7Var;EmployeeCategoryCostPrice7Var;EmployeeCategoryCostPricePerDay7Var" />
                  <Row cells="EmployeeCategoryNumber8Var;EmployeeCategoryName8Var;EmployeeCategoryBillingPrice8Var;EmployeeCategoryBillingPricePerDay8Var;EmployeeCategoryCostPrice8Var;EmployeeCategoryCostPricePerDay8Var" />
                  <Row cells="EmployeeCategoryNumber9Var;EmployeeCategoryName9Var;EmployeeCategoryBillingPrice9Var;EmployeeCategoryBillingPricePerDay9Var;EmployeeCategoryCostPrice9Var;EmployeeCategoryCostPricePerDay9Var" />
                  <Row cells="EmployeeCategoryNumber10Var;EmployeeCategoryName10Var;EmployeeCategoryBillingPrice10Var;EmployeeCategoryBillingPricePerDay10Var;EmployeeCategoryCostPrice10Var;EmployeeCategoryCostPricePerDay10Var" />
                </Scope>
              </Grid>
              <Field source="PriceControlBudgetTypeVar" title="Price Control Budget Type" />
              <Boolean source="PriceControlFromBudgetsVar" title="Price Control from Budgets" />
            </Group>
            <Group title="Budget, Base">
              <Grid style="grid_compact">
                <Header cells="|Hours|;|Cost|;|Billing Price|;|GM|;|GM %|;_" titleValue="BaseCurrencyVar" style="grid_header" />
                <Row title="Time" cells="NumberOfHoursVar;ShownCostPriceTimeVar;BillingPriceTimeVar;ShownGrossMarginTimeVar;ShownPercGrossMarginTimeVar;|%|" />
                <Row title="Amount" cells="_;CostPriceAmountVar;BillingPriceAmountVar;GrossMarginAmountVar;PercGrossMarginAmountVar;|%|" />
                <Row title="Total{In total}" cells="_;ShownCostPriceVar;BillingPriceVar;ShownGrossMarginTotalVar;ShownPercGrossMarginTotalVar;|%|" />
                <Row title="Hereof Outlays" cells="_;OfWhichOutlaysCostAndSalesBaseVar;OfWhichOutlaysCostAndSalesBaseVar;_;_" />
                <Row title="Excluding Outlays" cells="_;CostPriceWithoutOutlaysBaseVar;BillingPriceWithoutOutlaysBaseVar;GrossMarginWithoutOutlaysBaseVar;PercGrossWithoutOutlaysVar;|%|" />
                <Row title="Total Per" cells="KeyUnitVar;ShownCostPricePerUnitVar;BillingPricePerUnitVar;ShownGrossMarginPerUnitVar;_;_" />
                <Row title="Limit{Framework}" cells="LimitNumberOfHoursVar;ShowLimitCostPriceCopyVar;LimitBillingPriceVar;_;_;_" />
                <Row title="Quote Price" cells="_;_;QuotationPriceVar;_;_;_" />
              </Grid>
            </Group>
            <Group title="Budget, Currency">
              <Grid style="grid_compact">
                <Header cells="|Hours|;|Cost|;|Billing Price|;|GM|;|GM %|;_" titleValue="Currency" style="grid_header" />
                <Row title="Time" cells="NumberOfHoursVar;ShownCostPriceTimeCurrencyVar;BillingPriceTimeCurrencyVar;ShownGrossMarginTimeCurrencyVar;ShownPercGrossMarginTimeVar;|%|" />
                <Row title="Amount" cells="_;CostPriceAmountCurrencyVar;BillingPriceAmountCurrencyVar;GrossMarginAmountCurrencyVar;PercGrossMarginAmountVar;|%|" />
                <Row title="Total{In total}" cells="_;ShownCostPriceCurrencyVar;BillingPriceCurrencyVar;ShownGrossMarginTotalCurrencyVar;ShownPercGrossMarginTotalVar;|%|" />
                <Row title="Hereof Outlays" cells="_;OfWhichOutlaysCostCurrencyVar;OfWhichOutlaysSalesCurrencyVar;_;_;_" />
                <Row title="Excluding Outlays" cells="_;CostPriceWithoutOutlaysCurrencyVar;BillingPriceWithoutOutlaysCurrencyVar;GrossMarginWithoutOutlaysCurrencyVar;PercGrossWithoutOutlaysVar;|%|" />
                <Row title="Total Per" cells="KeyUnitVar;ShownCostPricePerUnitCurrencyVar;BillingPricePerUnitCurrencyVar;ShownGrossMarginPerUnitCurrencyVar;_;_" />
                <Row title="Limit{Framework}" cells="LimitNumberOfHoursVar;ShownLimitCostPriceCurrencyVar;LimitBillingPriceCurrencyVar;_;_;_" />
                <Row title="Quote Price" cells="_;_;QuotationPriceCurrencyVar;_;_;_" />
              </Grid>
            </Group>
          </Column>
          <Column>
            <Group title="Quote Price, Curr.">
              <Field source="QuotationPriceCurrency" title="Effective Quote Price" />
            </Group>
            <Group title="Limit{Framework}">
              <Field source="LimitNumberOfHours" title="Hours" />
              <Field source="ShownLimitCostPriceVar" title="Cost, Base" />
              <Field source="LimitBillingPriceCurrency" title="Billing Price, Curr." />
            </Group>
            <Group title="Forecast">
              <Field source="ProbabilityPercentage" />
            </Group>
            <Group title="Billing Price Deviations">
              <Field source="StdBillingPriceTotalBaseVar" title="Standard Billing Price, Base" />
              <Field source="BillingPriceVar" title="Billing Price, Base" />
              <Field source="StdUpDownBaseVar" title="Budgeted Up/Down" />
            </Group>
            <Group title="Unit Analysis{JobBudgets}">
              <Field source="KeyNumber" title="Quantity{Number}" />
              <Field source="KeyUnit" title="Unit" />
            </Group>
            <Group title="Company">
              <Reference foreignKey="CompanyNumber_CompanyInformation" />
              <Field source="BaseCurrency" />
            </Group>
            <Group title="Settling Company">
              <Reference foreignKey="SettlingCompany_CompanyInformation" />
            </Group>
            <Group title="Line Creation">
              <Field source="DefaultLineType" />
            </Group>
            <Group title="Transfer Job Dates">
              <Field source="TransferJobDatesActivityTypeVar" title="Activity Type" />
              <Boolean source="OverwriteExistingDatesVar" title="Overwrite Existing Dates" />
            </Group>
            <Group title="Daily Descriptions">
              <Boolean source="UseDailyDescriptions" />
            </Group>
          </Column>
        </Row>
        <Row>
          <Column>
            <Group title="Job Revenue Recognition">
              <Field source="RevenueRecognitionDateVar" title="Revenue Recognition Date" />
              <Boolean source="CalculateRevenueRecognitionVar" title="Calculate" />
              <Field source="RevenueRecognizedVar" title="Revenue Recognized" />
              <Grid style="grid_compact">
                <Header cells="|New Revenue Recognition|;|Adjustment{Job Revenue Recognition}|" title="" style="grid_header" />
                <Row cells="NewRevenueRecognitionValidBudgetVar;AdjustmentValidBudgetVar" title="Current Budget" />
                <Row cells="NewRevenueRecognitionThisBudgetVar;AdjustmentThisBudgetVar" title="This budget" />
                <Row cells="DifferenceThisAndValidBudgetVar" title="Change" />
              </Grid>
            </Group>
            <Group title="Remarks{sg}">
              <Field source="RevisionRemark1Var" appearance="maximized" />
              <Field source="RevisionRemark2Var" appearance="maximized" />
              <Field source="RevisionRemark3Var" appearance="maximized" />
              <Field source="RevisionRemark4Var" appearance="maximized" />
              <Field source="RevisionRemark5Var" appearance="maximized" />
              <Field source="RevisionRemark6Var" appearance="maximized" />
              <Field source="RevisionRemark7Var" appearance="maximized" />
              <Field source="RevisionRemark8Var" appearance="maximized" />
              <Field source="RevisionRemark9Var" appearance="maximized" />
              <Field source="RevisionRemark10Var" appearance="maximized" />
            </Group>
            <Group ref="UserUpdateGroup" />
          </Column>
          <Column>
            <Group title="Description{0}">
              <Field source="Description1" title="Internal" />
              <Field source="Description2" title="" />
              <Field source="Description3" title="" />
              <Field source="Reference" title="Ref." />
            </Group>
            <Group title="Status">
              <Field source="SubmittedVar" title="Submitted" />
              <Field source="SubmittedByVar" title="Submitted by" />
              <Field source="DateSubmittedVar" title="Date" />
              <Field source="ApprovedVar" title="Approved{Sg}" />
              <Field source="ApprovedByVar" title="Approved by" />
              <Field source="ApprovalDateVar" title="Date" />
              <Field source="ReopenedVar" title="Reopened" />
              <Field source="ReopenedByVar" title="Reopened by" />
              <Field source="DateReopenedVar" title="Date" />
              <If condition="hasAddOn(128) and (maconomy:stringSysInfo('IntegrationStatusNoteType')!='')">
                <Field source="IntegrationStatusLastSentVar" />
              </If>
            </Group>
            <Group title="Revision{JobBudgets}">
              <Field source="RevisionNumberVar" title="Revision No." />
            </Group>
          </Column>
        </Row>
      </Form>
      <Form name="CopyBudgetPage1">
        <Actions>
          <Update />
        </Actions>
        <Row>
          <Group>
            <Field source="CopiesFromJobNumberVar" />
            <Field source="CopyFromBudgetTypeVar" mandatory="true" />
            <Field source="CopyFromRevisionNumberVar" />
            <Field source="CopyFromActualsVar" />
            <Field source="CopyFromOpportunityNumberVar" />
            <Boolean source="OverwriteDuplicateLinesVar" />
          </Group>
        </Row>
      </Form>
      <Form name="CopyBudgetPage1_ram">
        <Actions>
          <Update />
        </Actions>
        <Row>
          <Group>
            <Field source="CopyFromBudgetTypeVar" mandatory="true" />
            <Field source="CopyFromRevisionNumberVar" />
            <Boolean source="OverwriteDuplicateLinesVar" />
          </Group>
        </Row>
      </Form>
      <Form name="Standard">
        <Actions all="true" collapseOrder="other default">
          <Exclude>
            <Action source="MarkAllForDailyDescriptions" />
            <Action source="UnmarkAllForDailyDescriptions" />
            <Action source="ApproveBudget" />
          </Exclude>
          <Action source="CopyBudget" wizard="CopyBudgetWizard" />
          <Action title="Approve Budget (inc. rev. rec)" source="MDK_ApproveBudget" appearance="standard" disabled="(ApprovedVar) defaultTo true" icon="Dot" />
          <Order>
            <Group name="default" title="Actions" grouped="always">
              <Action ref="MDK_ApproveBudget" />
              <Action ref="CopyBudget" />
              <Action ref="ReopenBudget" />
              <Action ref="RemoveBudget" />
            </Group>
            <Group name="other" title="Other Actions" grouped="always">
              <Action ref="CalculateJobSurcharge" />
              <Action ref="TransferToQuotation" />
              <Action ref="PrintQuotation" />
              <Action ref="PrintOrderConfirmation" />
              <Action ref="CreateRequisitions" />
              <Action ref="CreatePurchaseOrders" />
              <Action ref="TransferToSalesOrder" />
              <Action ref="TransferJobDates" />
              <Action ref="RecalculateBudget" />
              <Action ref="RederiveVATCodesOnJobBudget" />
              <Action ref="NewRevision" />
              <Action ref="PrintPriceOverview" />
              <Action ref="CreateBudget" />
            </Group>
          </Order>
        </Actions>
        <Column>
          <Group title="Information">
            <Field source="ShowBudgetTypeVar" title="Show Budget" />
            <Field source="CurrentBudgetType" />
            <Field source="RevisionNumberVar" title="Revision No." />
            <Field source="Currency" />
            <Field source="DefaultLineType" />
            <If condition="hasAddOn(128) and (maconomy:stringSysInfo('IntegrationStatusNoteType')!='')">
              <Field source="IntegrationStatusLastSentVar" />
            </If>
          </Group>
          <Group title="Description">
            <Field source="Description1" appearance="maximized" />
          </Group>
        </Column>
        <Column>
          <Group title="Billing Price Deviations">
            <UnitField source="StdBillingPriceTotalBaseVar" unitSource="BaseCurrency" title="Standard Billing Price, Base" />
            <UnitField source="BillingPriceVar" unitSource="BaseCurrency" title="Billing Price, Base" />
            <UnitField source="StdUpDownBaseVar" unitSource="BaseCurrency" title="Budgeted Up/Down" />
          </Group>
        </Column>
        <Column>
          <Group title="Budget, Currency">
            <Grid style="grid_compact">
              <Header cells="|Hours|;|Days|;|Cost|;|Billing Price|;|GM|;|GM %|" style="grid_header" />
              <Row title="Time" cells="NumberOfHoursVar;NumberOfDaysVar;ShownCostPriceTimeCurrencyVar;BillingPriceTimeCurrencyVar;ShownGrossMarginTimeCurrencyVar;ShownPercGrossMarginTimeVar+|%|" />
              <Row title="Amount" cells="_;_;CostPriceAmountCurrencyVar;BillingPriceAmountCurrencyVar;GrossMarginAmountCurrencyVar;PercGrossMarginAmountVar+|%|" />
              <Row title="Total" cells="_;_;ShownCostPriceCurrencyVar;BillingPriceCurrencyVar;ShownGrossMarginTotalCurrencyVar;ShownPercGrossMarginTotalVar+|%|" />
              <Row title="Hereof Outlays" cells="_;_;OfWhichOutlaysCostCurrencyVar;OfWhichOutlaysSalesCurrencyVar;_" />
              <Row title="Excluding Outlays" cells="_;_;CostPriceWithoutOutlaysCurrencyVar;BillingPriceWithoutOutlaysCurrencyVar;GrossMarginWithoutOutlaysCurrencyVar;PercGrossWithoutOutlaysVar+|%|" />
            </Grid>
          </Group>
        </Column>
      </Form>
      <Form name="Custom">
        <Actions all="true" collapseOrder="other default">
          <Exclude>
            <Action source="MarkAllForDailyDescriptions" />
            <Action source="UnmarkAllForDailyDescriptions" />
            <Action source="ApproveBudget" />
          </Exclude>
          <Action source="CopyBudget" wizard="CopyBudgetWizard_ram" />
          <Action title="Approve Budget (inc. rev. rec)" source="MDK_ApproveBudget" appearance="standard" disabled="(ApprovedVar ) defaultTo true" icon="Dot" />
          <Order>
            <Group name="default" title="Actions" grouped="always">
              <Action ref="MDK_ApproveBudget" />
              <Action ref="CopyBudget" />
              <Action ref="ReopenBudget" />
              <Action ref="RemoveBudget" />
            </Group>
            <Group name="other" title="Other Actions" grouped="always">
              <Action ref="CalculateJobSurcharge" />
              <Action ref="TransferToQuotation" />
              <Action ref="PrintQuotation" />
              <Action ref="PrintOrderConfirmation" />
              <Action ref="CreateRequisitions" />
              <Action ref="CreatePurchaseOrders" />
              <Action ref="TransferToSalesOrder" />
              <Action ref="TransferJobDates" />
              <Action ref="RecalculateBudget" />
              <Action ref="RederiveVATCodesOnJobBudget" />
              <Action ref="NewRevision" />
              <Action ref="PrintPriceOverview" />
              <Action ref="CreateBudget" />
            </Group>
          </Order>
        </Actions>
        <Column>
          <Group title="Information">
            <Field source="JobName" title="Project Name" style="highlightFieldLTBlue" open="false" frame="true" />
            <Field source="ShowBudgetTypeVar" title="Show Budget" />
            <Field source="CurrentBudgetType" />
            <Field source="RevisionNumberVar" title="Revision No." />
            <Field source="Currency" />
            <If condition="hasAddOn(128) and (maconomy:stringSysInfo('IntegrationStatusNoteType')!='')">
              <Field source="IntegrationStatusLastSentVar" />
            </If>
          </Group>
          <Group title="Comment">
            <Field source="Description1" appearance="maximized" />
          </Group>
        </Column>
        <If condition="ShowBudgetTypeVar=jobbudgettypetype'\working budget\">
          <Column>
            <Group title="Budget, Currency">
              <Grid style="grid_compact">
                <Style anchor="right" justify="right" />
                <!-- <Define>
						<Description name="Profit" template="^1" arguments="profitability(BillingPriceTimeCurrencyVar,CostPriceAmountCurrencyVar,ShownCostPriceTimeCurrencyVar)" />
						<Description name="FeeFactor_Time" template="^1" arguments="divXY(BillingPriceTimeCurrencyVar,ShownCostPriceTimeCurrencyVar)" />
						</Define> -->
                <Header cells="|Hours|;|Days|;|Cost|;|Billing Price|;|Gross Margin|;|Gross Margin %|" style="grid_header" />
                <Row title="Time" cells="NumberOfHoursVar;NumberOfDaysVar;ShownCostPriceTimeCurrencyVar;BillingPriceTimeCurrencyVar;ShownGrossMarginTimeCurrencyVar;ShownPercGrossMarginTimeVar+|%|" />
                <Row title="Amount" cells="_;_;CostPriceAmountCurrencyVar;BillingPriceAmountCurrencyVar;GrossMarginAmountCurrencyVar;PercGrossMarginAmountVar+|%|" />
                <Row title="Total" cells="_;_;ShownCostPriceCurrencyVar;BillingPriceCurrencyVar;ShownGrossMarginTotalCurrencyVar;ShownPercGrossMarginTotalVar+|%|" style="highlightFieldGrey" />
                <Row title="Hereof Outlays" cells="_;_;OfWhichOutlaysCostCurrencyVar;OfWhichOutlaysSalesCurrencyVar;_;_" />
                <Row title="Excluding Outlays" cells="_;_;CostPriceWithoutOutlaysCurrencyVar;BillingPriceWithoutOutlaysCurrencyVar;GrossMarginWithoutOutlaysCurrencyVar;PercGrossWithoutOutlaysVar+|%|" />
              </Grid>
            </Group>
            <!-- <Group title="KPI">
              <Grid style="grid_compact">
                <Style anchor="right" justify="right" />
                <Define>
                  <Description name="Profit" template="^1" arguments="profitability(BillingPriceWithoutOutlaysCurrencyVar,CostPriceAmountCurrencyVar-OfWhichOutlaysCostCurrencyVar,ShownCostPriceTimeCurrencyVar)" />
                  <Description name="FeeFactor_Time" template="^1" arguments="divXY(BillingPriceTimeCurrencyVar,ShownCostPriceTimeCurrencyVar)" />
                </Define>
                <Row title="Profitability" cells="Profit;_;_;_;_;_" />
                <Row title="Fee Factor" cells="FeeFactor_Time;_;_;_;_;_" />
              </Grid>
            </Group> -->
          </Column>
        </If>
      </Form>
      <Form name="Custom_Work_Cont">
        <Actions all="not HasPMReadOnly()" collapseOrder="other default">
          <Exclude>
            <Action source="MarkAllForDailyDescriptions" />
            <Action source="UnmarkAllForDailyDescriptions" />
            <Action source="ApproveBudget" />
            <Action source="SubmitBudget" />
            
            <If condition="ShowBudgetTypeVar!=jobbudgettypetype'\contract budget\">
          	 <Action source="MDK_synchronizeBudgetsCtoW" />
          	</If>
          	 <If condition="ShowBudgetTypeVar!=jobbudgettypetype'\working budget\">
             <Action source="MDK_synchronizeBudgetsWtoC" icon="Dot" />
          	</If>
          </Exclude>
          <Action source="MDK_synchronizeBudgetsCtoW" icon="Dot" disabled="HasPMReadOnly()" />
          <Action source="MDK_synchronizeBudgetsWtoC" icon="Dot" disabled="HasPMReadOnly()" />
	        <Action source="CopyBudget" wizard="CopyBudgetWizard_ram" disabled="HasPMReadOnly()" />
    	    <!-- The MDK_XX actions are customized, developed for Rambøll-->
    	   <!--  <If condition="ShowBudgetTypeVar=jobbudgettypetype'\working budget\">
             <Action title="Transfer new task(s) to Contract Budget" source="MDK_synchronizeBudgetsWtoC" appearance="standard" disabled="(ShowBudgetTypeVar!=jobbudgettypetype'\working budget\)" />
          	</If>
          	<If condition="ShowBudgetTypeVar=jobbudgettypetype'\contract budget\">
          	 <Action title="Transfer new task(s) to Working Budget" source="MDK_synchronizeBudgetsCtoW" appearance="standard" disabled="(ShowBudgetTypeVar!=jobbudgettypetype'\contract budget\)" />
          	</If> -->
          	<Action title="Submit &amp; Approve Budget" source="MDK_ApproveBudget" appearance="standard" disabled="(ApprovedVar) defaultTo true or HasPMReadOnly()" icon="Dot" />
          	<Action source="ReopenBudget" disabled="HasPMReadOnly()" /> 
           <Order>
           <Group name="default" title="Default" grouped="never" >
           	<Action ref="CopyBudget" />
         <!--  <Action ref="MDK_synchronizeBudgetsWtoC" />
           	<Action ref="MDK_synchronizeBudgetsCtoW" />
         -->  	
           	<Action ref="MDK_ApproveBudget" />
           	<Action ref="ReopenBudget" />
           </Group>
            <Group name="other" title="Other Actions" grouped="always">
              <Action ref="RemoveBudget" />
              <Action ref="CalculateJobSurcharge" />
              <Action ref="TransferToQuotation" />
              <Action ref="PrintQuotation" />
              <Action ref="PrintOrderConfirmation" />
              <Action ref="CreateRequisitions" />
              <Action ref="CreatePurchaseOrders" />
              <Action ref="TransferToSalesOrder" />
              <Action ref="TransferJobDates" />
              <Action ref="RecalculateBudget" />
              <Action ref="RederiveVATCodesOnJobBudget" />
              <Action ref="NewRevision" />
              <Action ref="PrintPriceOverview" />
              <Action ref="CreateBudget" />
            </Group>
          </Order>
        </Actions>
        <Column>
          <Group title="Information">
            <Field source="JobName" title="Project Name" style="highlightFieldLTBlue" open="false" frame="true" />
            <Field source="JobGroup" title="Project Group" open="false" frame="true" />
            <Description template="^1 (^2)" arguments="Name1;CustomerNumber" />
            <Boolean source="Closed" open="false" />
            <Field source="ShowBudgetTypeVar" title="Show Budget" />
            <!-- <Field source="ShowBudgetTypeVar" title="Show Budget" searchView="CustomOnlyWorkAndCont" searchOption="WorkAndCont" /> -->
            <!-- <Field source="CurrentBudgetType" /> -->
            <Field source="RevisionNumberVar" title="Revision No." />
            <Field source="Currency" />
            <If condition="hasAddOn(128) and (maconomy:stringSysInfo('IntegrationStatusNoteType')!='')">
              <Field source="IntegrationStatusLastSentVar" />
            </If>
          </Group>
          <Group title="Limit{Framework}">
            <Field source="LimitBillingPriceCurrency" title="Billing Price, Curr." />
          </Group>
         <If condition="ShowBudgetTypeVar=jobbudgettypetype'\contract budget\">
          <Group title="KPI">
              <Grid style="grid_compact">
                <Style anchor="right" justify="right" />
                <Define>
                  <Description name="Profit" template="^1" arguments="profitability(BillingPriceWithoutOutlaysCurrencyVar,CostPriceAmountCurrencyVar-OfWhichOutlaysCostCurrencyVar,ShownCostPriceTimeCurrencyVar)" />
                  <Description name="FeeFactor_Time" template="^1" arguments="divXY(BillingPriceTimeCurrencyVar,ShownCostPriceTimeCurrencyVar)" />
                </Define>
                <Row title="Profitability" cells="Profit;_;_;_;_;_" />
                <Row title="Fee Factor" cells="FeeFactor_Time;_;_;_;_;_" />
              </Grid>
            </Group>
           </If>
        </Column>
        <If condition="ShowBudgetTypeVar=jobbudgettypetype'\working budget\">
          <Column />
          <Column>
            <Group title="Budget, Base">
              <Grid style="grid_compact">
                <Header cells="|Hours|;|Cost|" titleValue="BaseCurrencyVar" style="grid_header" />
                <Row title="Time" cells="NumberOfHoursVar;ShownCostPriceTimeVar" />
                <Row title="Amount" cells="_;CostPriceAmountVar" />
                <Row title="Total" cells="_;ShownCostPriceVar" />
                <Row title="Hereof Outlays" cells="_;OfWhichOutlaysCostAndSalesBaseVar" />
                <Row title="Excluding Outlays" cells="_;CostPriceWithoutOutlaysBaseVar" />
              </Grid>
            </Group>
            <Group title="Budget, Currency">
              <Grid style="grid_compact">
                <Header cells="|Hours|;|Cost|" titleValue="Currency" style="grid_header" />
                <Row title="Time" cells="NumberOfHoursVar;ShownCostPriceTimeCurrencyVar" />
                <Row title="Amount" cells="_;CostPriceAmountCurrencyVar" />
                <Row title="Total" cells="_;ShownCostPriceCurrencyVar" />
                <Row title="Hereof Outlays" cells="_;OfWhichOutlaysCostCurrencyVar" />
                <Row title="Excluding Outlays" cells="_;CostPriceWithoutOutlaysCurrencyVar" />
              </Grid>
            </Group>
          </Column>
        </If>
        <If condition="ShowBudgetTypeVar=jobbudgettypetype'\contract budget\">
          <Column />
          <Column>
            <Group title="Budget, Base">
              <Grid style="grid_compact">
                <Header cells="|Hours|;|Cost|;|Billing Price|;|GM|;|GM %|;_" titleValue="BaseCurrencyVar" style="grid_header" />
                <Row title="Time" cells="NumberOfHoursVar;ShownCostPriceTimeVar;BillingPriceTimeVar;ShownGrossMarginTimeVar;ShownPercGrossMarginTimeVar;|%|" />
                <Row title="Amount" cells="_;CostPriceAmountVar;BillingPriceAmountVar;GrossMarginAmountVar;PercGrossMarginAmountVar;|%|" />
                <Row title="Total" cells="_;ShownCostPriceVar;BillingPriceVar;ShownGrossMarginTotalVar;ShownPercGrossMarginTotalVar;|%|" />
                <Row title="Hereof Outlays" cells="_;OfWhichOutlaysCostAndSalesBaseVar;OfWhichOutlaysCostAndSalesBaseVar;_;_" />
                <Row title="Excluding Outlays" cells="_;CostPriceWithoutOutlaysBaseVar;BillingPriceWithoutOutlaysBaseVar;GrossMarginWithoutOutlaysBaseVar;PercGrossWithoutOutlaysVar;|%|" />
              </Grid>
            </Group>
            <Group title="Budget, Currency">
              <Grid style="grid_compact">
                <Header cells="|Hours|;|Cost|;|Billing Price|;|GM|;|GM %|;_" titleValue="Currency" style="grid_header" />
                <Row title="Time" cells="NumberOfHoursVar;ShownCostPriceTimeCurrencyVar;BillingPriceTimeCurrencyVar;ShownGrossMarginTimeCurrencyVar;ShownPercGrossMarginTimeVar;|%|" />
                <Row title="Amount" cells="_;CostPriceAmountCurrencyVar;BillingPriceAmountCurrencyVar;GrossMarginAmountCurrencyVar;PercGrossMarginAmountVar;|%|" />
                <Row title="Total" cells="_;ShownCostPriceCurrencyVar;BillingPriceCurrencyVar;ShownGrossMarginTotalCurrencyVar;ShownPercGrossMarginTotalVar;|%|" />
                <Row title="Hereof Outlays" cells="_;OfWhichOutlaysCostCurrencyVar;OfWhichOutlaysSalesCurrencyVar;_;_;_" />
                <Row title="Excluding Outlays" cells="_;CostPriceWithoutOutlaysCurrencyVar;BillingPriceWithoutOutlaysCurrencyVar;GrossMarginWithoutOutlaysCurrencyVar;PercGrossWithoutOutlaysVar;|%|" />
              </Grid>
            </Group>
          </Column>
        </If>
        <Else />
        <Column>
          <Group title="Comment">
            <Field source="Description1" appearance="maximized" />
          </Group>
          <Group title="Status">
            <Field source="ApprovedVar" title="Approved{Sg}" />
            <Field source="ApprovedByVar" title="Approved by" />
            <Field source="ApprovalDateVar" title="Date" />
          </Group>
        </Column>
      </Form>
    </UpperPane>
    <LowerPane>
      <Define>
        <Include fragment="GD_Dimensions" />
        <Function name="sumLine" value="LineType=JobBudgetLineTypeType'\Sum/Text\ and NumberOfSubordinateLines gt 0" />
      	<Trigger name="CreateLinePostInitTrigger">
			<Assign source="NumberOf" value="1.0" />
		</Trigger>
		<Trigger name="CreateLinePreTrigger">
	      <Assign source="NumberOf" value="if LineType=JobBudgetLineTypeType'\Milestone\ or LineType=JobBudgetLineTypeType'\Sum/Text\ or LineType=JobBudgetLineTypeType'nil and TaskName = '' and Activitynumber = '' then 0.0 else 1.0" />
		</Trigger>
      </Define>
      <Table name="Full">
        <Actions all="true">
        <Create preTrigger="CreateLinePreTrigger" initPostTrigger="CreateLinePostInit"/>
        </Actions>
        <Columns>
          <Style ref="treeStructureSummaryLine" condition="NumberOfSubordinateLines gt 0" />
          <Field source="Text" />
          <Field source="ExternalDescription" />
          <Field source="LineType" open="not sumLine()" />
          <Field source="TaskName" open="not sumLine()" />
          <Field source="EmployeeCategoryNumber" title="Empl. Cat. No." open="not sumLine()" />
          <Field source="NumberOf" open="not sumLine()" title="NumberOf test" />
          <Field source="NumberOfManDays" open="not sumLine()" />
          <Field source="ActivityNumber" title="Act. No." open="not sumLine()" />
          <Field source="ShowCostPriceLowerVar" title="Cost, Base" open="not sumLine()" />
          <Field source="ShownCostPricePerDayVar" title="Cost Per Day, Base" open="not sumLine()" />
          <Field source="BillingPriceCurrency" open="not sumLine() and not isNonBillableActivity(ActivityNumber)" />
          <Field source="BillingPriceCurrencyPerDayVar" title="Billing Price Per Day, Curr." />
          <Field source="ShownMarkUpPercentageLowerVar" title="Markup %" open="not sumLine()" />
          <Field source="LineSpecificBillingPrice" open="not sumLine()  and not isNonBillableActivity(ActivityNumber)" />
          <Field source="ShownCostPriceTotalLowerVar" title="Total Cost, Base" open="not sumLine()" />
          <Field source="BillingPriceTotalCurrency" />
          <Field source="PurchasingCurrency" open="not sumLine()" />
          <Field source="ShownCostPricePurchasingCurrencyVar" title="Cost, Purchase Currency" open="not sumLine()" />
          <Field source="ShownCostPricePurchasingCurrencyPerDayVar" title="Cost Per Day, Purchase Currency" open="not sumLine()" />
          <Field source="ShownCostPriceTotalPurchCurrencyVar" title="Total Cost, Purchase Currency" open="not sumLine()" />
          <Field source="BillingPricePurchasingCurrency" title="Billing Price, Purchase Currency" open="not sumLine() and not isNonBillableActivity(ActivityNumber)" />
          <Field source="BillingPricePurchasingCurrencyPerDayVar" title="Billing Price Per Day, Purchase Currency" open="not sumLine() and not isNonBillableActivity(ActivityNumber)" />
          <Field source="BillingPriceTotalPurchasingCurrency" title="Billing Price Total, Purchase Currency" />
          <Field source="CostType" />
          <Field source="IncludedInFixedPrice" open="not sumLine()" />
          <Field source="TheDate" open="not sumLine()" />
          <Field source="PlannedDurationVar" title="Planned Duration" open="not sumLine()" />
          <Field source="ClosingDate" open="not sumLine()" />
          <Field source="DeliveryRemark" title="Deliv. Remarks" />
          <Field source="BillingPriceBase" />
          <Field source="BillingPriceBasePerDayVar" title="Billing Price Per Day, Base" />
          <Field source="BillingPriceTotalBase" title="Billing Price Total, Base" />
          <Field source="StdBillingPriceBase" />
          <Field source="StdBillingPriceTotalBase" title="Total Standard Billing Price, Base" />
          <Field source="SupplierNumber" open="not sumLine()" />
          <Field source="SupplierNameVar" title="Vendor Name" open="not sumLine()" />
          <Field source="YourReference" title="Your Reference" />
          <Field source="CreateSalesOrder" open="not sumLine()" />
          <Field source="CreatePurchaseOrder" open="not sumLine()" />
          <Field source="PurchaseOrderCurrency" open="not sumLine()" />
          <Field source="NumberOfPurchaseOrders" title="Number of Purchase Orders" />
          <Field source="NumberOfRequisitions" title="Number of Requisitions" />
          <Field source="PurchaseOrderNumber" title="Last Purchase Order No." />
          <Field source="PurchaseOrderSumBase" title="Purchase Order Total" />
          <Field source="ExecutingCompanyNumber" />
          <Field source="ExecutingCompanyNameVar" title="Name" />
          <Field source="EmployeeNumber" title="Empl." open="not sumLine()" />
          <Columns ref="DimensionColumns" />
          <If condition="not maconomy:booleanSysPar('UseMultipleVATLevels')">
            <Field source="ShownNetCostPriceLowerVar" title="Net Cost, Base" open="not sumLine()" />
            <Field source="ShownNetCostPricePerDayVar" title="Net Cost Per Day, Base" />
            <Field source="FinanceVATCode" open="not sumLine()" />
          </If>
          <Field source="ActivityTextVar" title="Activity Name" open="not sumLine()" />
          <Field source="TaskDescriptionVar" title="Task Description{1}" open="not sumLine()" />
          <Field source="EmployeeCategoryNameVar" title="Empl. Cat. Name" open="not sumLine()" />
          <Field source="EmployeeNameVar" title="Employee Name" open="not sumLine()" />
          <Field source="JobBudgetTextAssignedVar" title="Job Budget Text" />
          <Field source="StdBillingPriceCurrency" />
          <Field source="StdBillingPriceCurrencyPerDayVar" title="Standard Billing Price Per Day, Currency" />
          <Field source="StdBillingPriceTotalCurrency" title="Total Standard Billing Price, Currency{1}" />
          <Field source="Remark" />
          <Field source="Remark2" />
          <Field source="Remark3" />
          <Field source="Remark4" />
          <Field source="Remark5" />
          <Field source="Remark6" />
          <Field source="Remark7" />
          <Field source="Remark8" />
          <Field source="Remark9" />
          <Field source="Remark10" />
          <Field source="NumberPlanned" />
          <Field source="ChangedInRevisionNumber" title="Changed in Revision No." />
        </Columns>
      </Table>
      <Table name="Standard">
        <Actions all="true">
         <Create preTrigger="CreateLinePreTrigger" initPostTrigger="CreateLinePostInit"/>
        </Actions>
        <Columns>
          <Style ref="treeStructureSummaryLine" condition="NumberOfSubordinateLines gt 0" />
          <Field source="Text" />
          <Field source="ExternalDescription" />
          <Field source="LineType" open="not sumLine()" />
          <Field source="EmployeeCategoryNumber" open="not sumLine()" />
          <Field source="EmployeeNumber" open="not sumLine()" />
          <Field source="TaskName" open="not sumLine()" />
          <Field source="NumberOf" size="tiny" open="not sumLine()" />
          <Field source="BillingPriceCurrency" size="small" open="not sumLine()" />
          <Field source="CostPrice" size="small" open="not sumLine()" />
          <Field source="BillingPriceTotalCurrency" />
          <Field source="CostPriceTotal" open="not sumLine()" />
          <Description title="GM, Base" arguments="BillingPriceTotalBase - CostPriceTotal" template="^1">
            <Style justify="right" size="medium" />
          </Description>
        </Columns>
      </Table>
      <Table name="Work_Cont" open="true">
        <Actions all="true">
        <Create preTrigger="CreateLinePreTrigger" initPostTrigger="CreateLinePostInit"/>
        </Actions>
        <Columns>
          <Style ref="treeStructureSummaryLine" condition="NumberOfSubordinateLines gt 0" />
          <Field source="Text" title="Budget Line Description" />
          <Field source="TaskDescriptionVar" open="false" />
          <Field source="TaskName" size="small" mandatory="not sumLine()" searchView="CustomNonBlocked" searchOption="taskNonBlocked" />
          <Field source="NumberOf" />
          <Field source="ShowCostPriceLowerVar" title="Cost, Base" open="true" />
          <Field source="ShownCostPriceTotalLowerVar" title="Total Cost, Base" open="true" />
          <If condition="parent.ShowBudgetTypeVar=jobbudgettypetype'\contract budget\">
            <Field source="BillingPriceCurrency" open="true" />
            <Field source="BillingPriceTotalCurrency" />
          </If>
          <Field source="PurchasingCurrency" />
          <Field source="ShownCostPricePurchasingCurrencyVar" title="Cost, Purchase Currency"/>
          <Field source="ShownCostPriceTotalPurchCurrencyVar" title="Total Cost, Purchase Currency" />
          <If condition="parent.ShowBudgetTypeVar=jobbudgettypetype'\contract budget\">
          	<Field source="BillingPriceTotalPurchasingCurrency" />
          </If>
          <Field source="ActivityNumber" />
          <Field source="LineType" mandatory="true" />
          <!-- <Style ref="treeStructureSummaryLine" condition="NumberOfSubordinateLines gt 0" />
          <Field source="TaskName" size="tiny" open="create" mandatory="true" />
          <Field source="Text" open="update" mandatory="true" />
          <Field source="NumberOf" open="not sumLine()" />
          <If condition="parent.ShowBudgetTypeVar=jobbudgettypetype'\contract budget\">
            <Field source="BillingPriceCurrency" open="not sumLine()" />
            <Field source="BillingPriceTotalCurrency" title="Billing Price Total, Base" open="false" />
          </If>
          <Field source="ShowCostPriceLowerVar" title="Cost, Base" open="true" />
          <Field source="ShownCostPriceTotalLowerVar" title="Total Cost, Base" open="true" />
          <Field source="PurchasingCurrency" />
          <Field source="CostPricePurchasingCurrency" />
          <Field source="CostPriceTotalPurchasingCurrency" />
          <Field source="ActivityNumber" open="true" mandatory="true" />
          <Field source="LineType" mandatory="true" /> -->
        </Columns>
      </Table>
      <Table name="Work_Cont_Closed" open="false">
        <Actions all="true">
        <Create preTrigger="CreateLinePreTrigger" initPostTrigger="CreateLinePostInit"/>
        </Actions>
        <Columns>
          <Style ref="treeStructureSummaryLine" condition="NumberOfSubordinateLines gt 0" />
          <Field source="TaskName" size="tiny" mandatory="not sumLine()" />
          <Field source="TaskDescriptionVar" mandatory="not sumLine()" />
          <Field source="NumberOf" />
          <If condition="parent.ShowBudgetTypeVar=jobbudgettypetype'\contract budget\">
            <Field source="BillingPriceCurrency" />
            <Field source="BillingPriceTotalCurrency" title="Billing Price Currency, Total" />
          </If>
          <Field source="ShowCostPriceLowerVar" title="Cost, Base" />
          <Field source="ShownCostPriceTotalLowerVar" title="Total Cost, Base" />
          <Field source="PurchasingCurrency" />
          <Field source="ShownCostPricePurchasingCurrencyVar" />
          <Field source="ShownCostPriceTotalPurchCurrencyVar" />
          <Field source="ActivityNumber" />
          <Field source="LineType" mandatory="true" />
          <!-- <Style ref="treeStructureSummaryLine" condition="NumberOfSubordinateLines gt 0" />
          <Field source="TaskName" size="tiny" open="create" mandatory="true" />
          <Field source="Text" open="update" mandatory="true" />
          <Field source="NumberOf" open="not sumLine()" />
          <If condition="parent.ShowBudgetTypeVar=jobbudgettypetype'\contract budget\">
            <Field source="BillingPriceCurrency" open="not sumLine()" />
            <Field source="BillingPriceTotalCurrency" title="Billing Price Total, Base" open="false" />
          </If>
          <Field source="ShowCostPriceLowerVar" title="Cost, Base" open="true" />
          <Field source="ShownCostPriceTotalLowerVar" title="Total Cost, Base" open="true" />
          <Field source="PurchasingCurrency" />
          <Field source="CostPricePurchasingCurrency" />
          <Field source="CostPriceTotalPurchasingCurrency" />
          <Field source="ActivityNumber" open="true" mandatory="true" />
          <Field source="LineType" mandatory="true" /> -->
        </Columns>
      </Table>
    </LowerPane>
  </Layout>
</MDML>

