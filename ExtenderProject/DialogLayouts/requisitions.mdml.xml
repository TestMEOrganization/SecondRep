<?xml version="1.0" encoding="UTF-8"?>
<!-- KRN, 16/03/09: Job Purchase Processes Workspace (37560).-->
<!-- RMA, 06/04/09: Create empty forms for every dialog (37642).-->
<!-- MJA, 26/06/09: Rename "Original" views to "Standard" (37797).-->
<!-- JSV, 02/07/09: Insert Original layout converted from mdl and filter layout (37802).-->
<!-- KRN, 03/09/09: Removed Standard because equal to Original (37560).-->
<!-- MJA, 27/10/09: Update Original layout and remove Empty layout (37802).-->
<!-- KRN, 27/10/09: Demo layout (38072).-->
<!-- KRN, 11/01/10: Title on wizard (38192).-->
<!-- JSV, 29/04/10: Use FullBoolean for Boolean fields open in new or update state (38472).-->
<!-- KUN, 07/07/10: Added group and columns for user update information (38625).-->
<!-- KRN, 15/07/10: Remove Create action from demo layout (38189).-->
<!-- BPE, 17/09/10: Changed layout to use global definition dimensions (38828). -->
<!-- KRN, 17/11/10: Compact description template (39111).-->
<!-- KRN, 29/11/10: Demo layout indented correctly (38950) -->
<!-- JSV, 01/12/10: Standard compact Original filter (39106).-->
<!-- PSZ, 03/12/10: Use onDemand suggestions for relevant fields (39127).-->
<!-- KUN, 20/01/11: Table layout moved to GD_PurchaseAllocation. (39360).-->
<!-- PSZ, 20/06/11: Original layout should be placed as the first layout (39299).-->
<!-- CSK, 14/07/11: Demo form is readonly in Vendors workspaces (39413).-->
<!-- CSK, 22/07/11: Workspace link added to Demo form (39786).-->
<!-- JSV, 17/08/11: Icon on links (39862).-->
<!-- JSV, 24/08/11: Use reference element where possible (39874).-->
<!-- JSV, 30/08/11: Description source for reference on SelectedSupplierNumber_Vendor (39874).-->
<!-- CSK, 06/09/11: Use waypoint for workspace link (39786).-->
<!-- KUN, 10/10/11: Improvements to demo layout and the wizards (40008). -->
<!-- CSK, 05/12/11: New InVendorContext filter added (40259).-->
<MDML xmlns="http://www.deltek.com/ns/mdml" version="0.59">
  <Layout source="Requisitions">
    <FilterPane>
      <Filter name="Standard">
        <Compact>
          <Description template="Requisition No. ^1" arguments="RequisitionNumber" />
        </Compact>
        <Columns>
          <Field source="RequisitionNumber" />
          <Field source="JobNumber" />
          <Field source="JobName" />
          <Field source="PurchaseProcessNumber" />
          <Field source="SuggestedSupplierNumber" />
          <Field source="OurReference" />
          <Field source="PurchaserEmployeeNumber" />
          <Field source="RequisitionerEmployeeNumber" />
          <Field source="SelectedSupplierNumber" />
          <Field source="DeadlineForQuote" />
        </Columns>
      </Filter>
      <Filter name="InVendorContext">
        <Compact>
          <Description template="Requisition No. ^1" arguments="RequisitionNumber" />
        </Compact>
        <Columns>
          <Field source="RequisitionNumber" />
          <Field source="PurchaseProcessNumber" />
          <Field source="JobNumber" />
          <Field source="JobName" />
          <Field source="OurReference" />
          <Field source="PurchaserEmployeeNumber" />
          <Field source="RequisitionerEmployeeNumber" />
          <Field source="DeadlineForQuote" />
        </Columns>
      </Filter>
    </FilterPane>
    <UpperPane>
      <Define>
        <Include fragment="GD_Dimensions" />
      </Define>
      <Wizard name="CreateRFQFromRequisitionWizard" title="Create Request for Quote from Requisition">
        <Page form="CreateRFQPage1" title="Select Vendor" />
      </Wizard>
      <Wizard name="CreatePOFromRequisitionWizard" title="Create Purchase Order from Requisition">
        <Page form="CreatePOPage1" title="Select Vendor" />
      </Wizard>
      <Form name="Custom">
        <Actions>
          <If condition="not (workspace() like 'Vendors')                  and not (workspace() like 'CompanyVendors')">
            <Update />
            <Delete />
            <Action source="SubmitRequisition" />
            <Action source="ApproveRequisition" />
            <Action source="CloseRequisition" />
            <Action source="ReopenRequisition" />
            <Action source="CreateRequestForQuote" wizard="CreateRFQFromRequisitionWizard" />
            <Action source="CreatePurchaseOrder" wizard="CreatePOFromRequisitionWizard" />
            <Action source="RestoreRequestsForQuote" />
          </If>
        </Actions>
        <Column>
          <Group title="Requisition">
            <Field source="RequisitionNumber" />
            <Field source="OurReference" title="Our Ref." />
            <Reference foreignKey="RequisitionerEmployeeNumber_Employee" />
            <Reference foreignKey="PurchaserEmployeeNumber_Employee" />
            <Reference foreignKey="JobNumber_JobHeader" title="Job" />
          </Group>
          <Group title="Remarks">
          	<Field source="Remark1" appearance="maximized" shadowTitle="Remark 1" >
            	<Style height="3" />
            </Field>
            <Field source="Remark2" appearance="maximized" shadowTitle="Remark 2" >
            	<Style height="3" />
            </Field>
          </Group>
          <Group title="Job">
            <Reference keySource="JobCustomerNumberVar" descriptionSource="JobCustomerName1Var" title="Customer" />
          </Group>
          <Group title="Status">
            <If condition="Submitted">
              <Description template="^1 by ^2" arguments="DateSubmitted;SubmittedBy" title="Submitted" />
            </If>
            <Else>
              <Field source="Submitted" />
            </Else>
            <If condition="Approved">
              <Description template="^1 by ^2" arguments="ApprovalDate;ApprovedBy" title="Approved" />
            </If>
            <Else>
              <Field source="Approved" />
            </Else>
            <If condition="Closed">
              <Description template="^1 by ^2" arguments="ClosingDate;ClosedBy" title="Closed" />
            </If>
            <Else>
              <Field source="Closed" />
            </Else>
          </Group>
          <Group ref="UserUpdateGroup" />
        </Column>
        <Column>
          <Group title="Delivery">
            <Field source="PreferredDeliveryDate" />
          </Group>
          <Group title="Suggested Supplier">
            <Field source="SuggestedSupplierNumber" title="Vendor" />
            <If condition="SuggestedSupplierNumber!=''">
              <Field source="Name1" appearance="maximized" />
              <Field source="Name2" appearance="maximized" />
              <Field source="Name3" appearance="maximized" />
              <ZipCity citySource="PostalDistrict" zipSource="ZipCode" appearance="maximized" />
              <Field source="Name4" appearance="maximized" />
              <Field source="Name5" appearance="maximized" />
              <Field source="Attention" title="Attn." />
              <Field source="Country" />
              <Field source="Telephone" />
              <Field source="Telefax" />
              <Field source="Telex" />
            </If>
          </Group>
          <Group ref="DimensionGroup" />
          <Group>
            <Link workspace="C_PurchaseProcesses" template="Purchase Process: ^1" title="" tooltip="Open Current Purchase Process" arguments="PurchaseProcessNumber" appearance="maximized" icon="WorkspaceLink">
              <Waypoint pane="PurchaseProcessFilter">
                  <Restriction template="Selected Purchase Process" expression="PurchaseProcessNumber=target.PurchaseProcessNumber" />
                <Focus>
                  <Match field="PurchaseProcessNumber" value="PurchaseProcessNumber" />
                </Focus>
              </Waypoint>
              <Target pane="PurchaseProcesses_Card" >
                  <Restriction template="Selected Purchase Process" expression="PurchaseProcessNumber=target.PurchaseProcessNumber" />
                  <Focus>
                    <Match field="PurchaseProcessNumber" value="PurchaseProcessNumber" />
                  </Focus>
              </Target>
            </Link>
          </Group>
        </Column>
        <Column>
          <If condition="not hasWorkspace('PurchaseProcesses')">
            <Group>
              <Link workspace="PurchaseProcesses" template="More details..." tooltip="Detailed requisition" appearance="maximized" icon="WorkspaceLink">
                <Waypoint pane="PurchaseProcessFilter">
                  <Restriction template="Selected Purchase Process" expression="PurchaseProcessNumber=target.PurchaseProcessNumber" />
                  <Focus>
                    <Match field="PurchaseProcessNumber" value="PurchaseProcessNumber" />
                  </Focus>
                </Waypoint>
                <Target pane="RequisitionsCard">
                  <Restriction template="Selected Purchase Process" expression="PurchaseProcessNumber=target.PurchaseProcessNumber" />
                  <Focus>
                    <Match field="PurchaseProcessNumber" value="PurchaseProcessNumber" />
                  </Focus>
                </Target>
              </Link>
            </Group>
          </If>
        </Column>
      </Form>
      <Form name="Full">
        <Actions all="true" />
        <Row>
          <Column>
            <Group title="Requisition{Internal}">
              <Field source="RequisitionNumber" />
              <Reference foreignKey="PurchaseProcessNumber_PurchaseProcessHeader" />
              <Field source="OurReference" title="Our Ref.{abbr}" />
              <Reference foreignKey="RequisitionerEmployeeNumber_Employee" />
              <Reference foreignKey="PurchaserEmployeeNumber_Employee" />
            </Group>
            <Group title="Create Request for Quote/Purchase Order">
              <Reference foreignKey="SelectedSupplierNumber_Vendor" descriptionSource="SupplierNameVar" />
              <Field source="Currency" />
              <Field source="DeadlineForQuote" />
            </Group>
            <Group title="Job">
              <Reference foreignKey="JobNumber_JobHeader" title="Job" />
              <Reference keySource="JobCustomerNumberVar" descriptionSource="JobCustomerName1Var" title="Customer" />
            </Group>
            <Group title="Company">
              <Reference foreignKey="RequisitionHeaderCompanyNumber_CompanyInformation" />
            </Group>
            <Group title="Copying">
              <Field source="CopyFromRequisitionNumberVar" title="Requisition{Internal}" />
              <Boolean source="CopyRequestsForQuoteVar" title="Copy Requests for Quote" />
            </Group>
            <Group title="Purchase Process Access Level">
              <Field source="PurchaseProcessAccessLevelNameVar" title="Name" />
              <Field source="LevelDescriptionVar" title="Description{0}" />
            </Group>
            <Group ref="UserUpdateGroup" />
          </Column>
          <Column>
            <Group title="Delivery">
              <Field source="PreferredDeliveryDate" />
            </Group>
            <Group title="Suggested Supplier">
              <Field source="SuggestedSupplierNumber" title="Vendor{No.}" />
              <Field source="Name1" appearance="maximized" />
              <Field source="Name2" appearance="maximized" />
              <Field source="Name3" appearance="maximized" />
              <ZipCity citySource="PostalDistrict" zipSource="ZipCode" appearance="maximized" />
              <Field source="Name4" appearance="maximized" />
              <Field source="Name5" appearance="maximized" />
              <Field source="Attention" title="Attn." />
              <Field source="Country" />
              <Field source="Telephone" />
              <Field source="Telefax" />
              <Field source="Telex" />
            </Group>
            <Group ref="DimensionGroup" />
            <Group title="Status">
              <If condition="Submitted">
                <Description template="^1 by ^2" arguments="DateSubmitted;SubmittedBy" title="Submitted" />
              </If>
              <Else>
                <Field source="Submitted" />
              </Else>
              <If condition="Approved">
                <Description template="^1 by ^2" arguments="ApprovalDate;ApprovedBy" title="Approved" />
              </If>
              <Else>
                <Field source="Approved" />
              </Else>
              <If condition="Closed">
                <Description template="^1 by ^2" arguments="ClosingDate;ClosedBy" title="Closed" />
              </If>
              <Else>
                <Field source="Closed" />
              </Else>
            </Group>
          </Column>
        </Row>
        <Row>
          <Group title="Remarks{pl}">
            <Field source="Remark1" />
            <Field source="Remark2" />
            <Field source="Remark3" />
            <Field source="Remark4" />
            <Field source="Remark5" />
            <Field source="Remark6" />
            <Field source="Remark7" />
            <Field source="Remark8" />
            <Field source="Remark9" />
            <Field source="Remark10" />
          </Group>
        </Row>
      </Form>
      <Form name="CreateRFQPage1">
        <Actions>
          <Create />
          <Update />
          <Delete />
          <Print />
          <PrintThis />
        </Actions>
        <Row>
          <Group>
            <If condition="SuggestedSupplierNumber=''">
              <Reference foreignKey="SelectedSupplierNumber_Vendor" keySource="SelectedSupplierNumber" descriptionSource="SupplierNameVar" keySize="large" keyMandatory="true" />
            </If>
            <Else>
              <Reference foreignKey="SelectedSupplierNumber_Vendor" keySource="SelectedSupplierNumber" descriptionSource="SupplierNameVar" keySize="large" keyShadowTitle="Number (blank for default)" />
            </Else>
            <Field source="Currency" mandatory="true" />
            <Field source="DeadlineForQuote" />
          </Group>
        </Row>
      </Form>
      <Form name="CreatePOPage1">
        <Actions>
          <Create />
          <Update />
          <Delete />
          <Print />
          <PrintThis />
        </Actions>
        <Row>
          <Group>
            <If condition="SuggestedSupplierNumber=''">
              <Reference foreignKey="SelectedSupplierNumber_Vendor" keySource="SelectedSupplierNumber" descriptionSource="SupplierNameVar" keySize="large" keyMandatory="true" />
            </If>
            <Else>
              <Reference foreignKey="SelectedSupplierNumber_Vendor" keySource="SelectedSupplierNumber" descriptionSource="SupplierNameVar" keySize="large" keyShadowTitle="Number (blank for default)" />
            </Else>
            <Field source="Currency" />
          </Group>
        </Row>
      </Form>
      <Form name="Demo">
        <Actions>
          <If condition="not (workspace() like 'Vendors')                  and not (workspace() like 'CompanyVendors')">
            <Update />
            <Delete />
            <Action source="SubmitRequisition" />
            <Action source="ApproveRequisition" />
            <Action source="CloseRequisition" />
            <Action source="ReopenRequisition" />
            <Action source="CreateRequestForQuote" wizard="CreateRFQFromRequisitionWizard" />
            <Action source="CreatePurchaseOrder" wizard="CreatePOFromRequisitionWizard" />
            <Action source="RestoreRequestsForQuote" />
          </If>
        </Actions>
        <Column>
          <Group title="Requisition">
            <Field source="RequisitionNumber" />
            <Field source="OurReference" title="Our Ref." />
            <Reference foreignKey="RequisitionerEmployeeNumber_Employee" />
            <Reference foreignKey="PurchaserEmployeeNumber_Employee" />
          </Group>
          <Group title="Job">
            <Reference foreignKey="JobNumber_JobHeader" title="Job" />
            <Reference keySource="JobCustomerNumberVar" descriptionSource="JobCustomerName1Var" title="Customer" />
          </Group>
          <Group title="Status">
            <If condition="Submitted">
              <Description template="^1 by ^2" arguments="DateSubmitted;SubmittedBy" title="Submitted" />
            </If>
            <Else>
              <Field source="Submitted" />
            </Else>
            <If condition="Approved">
              <Description template="^1 by ^2" arguments="ApprovalDate;ApprovedBy" title="Approved" />
            </If>
            <Else>
              <Field source="Approved" />
            </Else>
            <If condition="Closed">
              <Description template="^1 by ^2" arguments="ClosingDate;ClosedBy" title="Closed" />
            </If>
            <Else>
              <Field source="Closed" />
            </Else>
          </Group>
          <Group ref="UserUpdateGroup" />
        </Column>
        <Column>
          <Group title="Delivery">
            <Field source="PreferredDeliveryDate" />
          </Group>
          <Group title="Suggested Supplier">
            <Field source="SuggestedSupplierNumber" title="Vendor" />
            <If condition="SuggestedSupplierNumber!=''">
              <Field source="Name1" appearance="maximized" />
              <Field source="Name2" appearance="maximized" />
              <Field source="Name3" appearance="maximized" />
              <ZipCity citySource="PostalDistrict" zipSource="ZipCode" appearance="maximized" />
              <Field source="Name4" appearance="maximized" />
              <Field source="Name5" appearance="maximized" />
              <Field source="Attention" title="Attn." />
              <Field source="Country" />
              <Field source="Telephone" />
              <Field source="Telefax" />
              <Field source="Telex" />
            </If>
          </Group>
          <Group ref="DimensionGroup" />
        </Column>
        <Column>
          <If condition="not hasWorkspace('PurchaseProcesses')">
            <Group>
              <Link workspace="PurchaseProcesses" template="More details..." tooltip="Detailed requisition" appearance="maximized" icon="WorkspaceLink">
                <Waypoint pane="PurchaseProcessFilter">
                  <Restriction template="Selected Purchase Process" expression="PurchaseProcessNumber=target.PurchaseProcessNumber" />
                  <Focus>
                    <Match field="PurchaseProcessNumber" value="PurchaseProcessNumber" />
                  </Focus>
                </Waypoint>
                <Target pane="RequisitionsCard">
                  <Restriction template="Selected Purchase Process" expression="PurchaseProcessNumber=target.PurchaseProcessNumber" />
                  <Focus>
                    <Match field="PurchaseProcessNumber" value="PurchaseProcessNumber" />
                  </Focus>
                </Target>
              </Link>
            </Group>
          </If>
        </Column>
      </Form>
    </UpperPane>
    <LowerPane>
      <Define>
        <Include fragment="GD_Dimensions" />
        <Include fragment="GD_PurchaseAllocation" />
      </Define>
      <Table name="Full">
        <Actions all="true" />
        <Columns>
          <Field source="JobNumber" />
          <Field source="JobNameVar" title="Job Name" />
          <Field source="ActivityNumber" />
          <Field source="EmployeeNumber" title="Empl. No." />
          <Field source="AccountNumber" />
          <Field source="AccountActivityText" />
          <Field source="LineText" />
          <Field source="TextLine" />
          <Field source="NumberOf" />
          <Field source="DateOfDelivery" />
          <Field source="RegistrationCodeName" />
          <Field source="CompanyNumber" />
          <Columns ref="DimensionColumns" />
          <Field source="TaskName" />
          <Field source="TaskTextVar" title="Task Description{1}" />
          <Field source="JobBudgetLineNumberVar" title="Job Budget Line No." />
          <Field source="JobBudgetLineWBSTextVar" />
          <Field source="EmployeeNameVar" title="Employee Name" />
          <Field source="NoteNumber" />
          <Field source="NoteDescriptionVar" title="Note Description" />
        </Columns>
      </Table>
      <Table name="PurchaseProcess">
        <Actions all="true" />
        <Columns>
          <Columns ref="C_RequisitionLineColumns" />
        </Columns>
      </Table>
      <Table name="Demo">
        <Actions all="not (workspace() like 'Vendors')                 and not (workspace() like 'CompanyVendors')" />
        <Columns>
          <Field source="JobNumber" />
          <Field source="TaskName" />
          <Field source="TaskTextVar" />
          <Field source="ActivityNumber" />
          <Field source="NumberOf" />
          <Field source="EmployeeNumber" />
          <Field source="LineText" />
          <Field source="TextLine" />
          <Field source="DateOfDelivery" />
          <Field source="AccountNumber" />
          <Field source="AccountActivityText" />
          <Field source="CompanyNumber" />
          <Columns ref="DimensionColumns" />
        </Columns>
      </Table>
    </LowerPane>
  </Layout>
</MDML>

